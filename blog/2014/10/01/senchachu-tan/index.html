
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Sencha初探 - AllenToFight Blog</title>
	<meta name="author" content="AllenToFight">

	
	<meta name="description" content="Sencha初探 入门教程笔记 创建app cd到sencha touch的sdk(目前最新版本为touch-2.4.0)下执行以下命令 1
sencha generate app MyApp /path/to/www/myapp Sencha+PhoneGap+Cordova &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="AllenToFight Blog" type="application/atom+xml">
	
	<link rel="canonical" href="http://xiekunRonaldo.github.io/blog/2014/10/01/senchachu-tan/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/27a0140c11f18fab9bf284743d2b2b4c?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>
<hgroup>
  <h1><a href="/">AllenToFight Blog</a></h1>
  
    <h2>Life To Code.</h2>
  
</hgroup>

<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="weibo" href="http://www.weibo.com/1876496750" title="Weibo">Facebook</a>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Sencha初探</h1>
	<div class="entry-content" itemprop="articleBody"><p><a href="http://vimeo.com/76568053">入门教程</a>笔记</p>

<h4>创建app</h4>

<p>cd到sencha touch的sdk(目前最新版本为touch-2.4.0)下执行以下命令</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">sencha</span> <span class="nx">generate</span> <span class="nx">app</span> <span class="nx">MyApp</span> <span class="o">/</span><span class="nx">path</span><span class="o">/</span><span class="nx">to</span><span class="o">/</span><span class="nx">www</span><span class="o">/</span><span class="nx">myapp</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Sencha+PhoneGap+Cordova</h4>

<ul>
<li>PhoneGap和Cordova的安装</li>
</ul>


<p>首选安装<a href="http://nodejs.org/">NodeJS</a>安装以后执行以下命令</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">sudo</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">-</span><span class="nx">g</span> <span class="nx">phonegap</span>
</span><span class='line'><span class="nx">sudo</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">-</span><span class="nx">g</span> <span class="nx">cordova</span>
</span></code></pre></td></tr></table></div></figure>


<p>即可安装<a href="http://phonegap.com/">phonegap</a>,<a href="http://cordova.apache.org/">cordova</a></p>

<h4>为Sencha App添加Cordova支持</h4>

<p>进入Sencha app的根据目录,执行以下命令</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">sencha</span> <span class="nx">cordova</span> <span class="nx">init</span> <span class="p">[</span><span class="nx">bundleID</span><span class="p">]</span> <span class="p">[</span><span class="nx">Native</span> <span class="nx">app</span> <span class="nx">name</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>注意<code>Native app name</code>可以为空,这样编译到手机的名字即为sencha touch app的名字
执行完以上的命令后,<code>app.json</code>里会出现cordova的选项,如下图所示</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s2">&quot;cordova&quot;</span> <span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                    <span class="c1">// Uncomment the line below and add the platforms you wish to build for</span>
</span><span class='line'>                    <span class="c1">//&quot;platforms&quot;: &quot;ios android&quot;,</span>
</span><span class='line'>
</span><span class='line'>                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;com.doouya.growIndex&quot;</span><span class="p">,</span>
</span><span class='line'>                    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;NotesApp&quot;</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>            <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>在<code>platforms</code>选项上添加你想支持的平台，这里我选了iOS,然后编译app</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">sencha</span> <span class="nx">app</span> <span class="nx">build</span> <span class="kr">native</span>
</span></code></pre></td></tr></table></div></figure>


<p>或者运行到真机上</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">sencha</span> <span class="nx">app</span> <span class="nx">run</span> <span class="kr">native</span>
</span></code></pre></td></tr></table></div></figure>


<p>或是在模拟器上运行</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">sencha</span> <span class="nx">app</span> <span class="nx">emulate</span> <span class="kr">native</span>
</span></code></pre></td></tr></table></div></figure>


<p>集成phonegap和Cordova后，我们可以看看集成是否成功,在app.js里的launch函数里写入以下代码</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">Ext</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">PhoneGap</span><span class="p">){</span>
</span><span class='line'>  <span class="c1">//TestCode</span>
</span><span class='line'>  <span class="nx">alert</span><span class="p">(</span><span class="nx">device</span><span class="p">.</span><span class="nx">uuid</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>注意这行<code>alert(device.uuid);</code>，现在phoneGap将native api剥离它的Core代码了,以plugin的形式管理,如上，如果你想用device，你需要将相应的plugin添加进来,以下为添加步骤:
* 进入Cordova的目录下
* 执行以下命令</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">cordova</span> <span class="nx">plugin</span> <span class="nx">add</span> <span class="nx">org</span><span class="p">.</span><span class="nx">apache</span><span class="p">.</span><span class="nx">cordova</span><span class="p">.</span><span class="nx">device</span>
</span></code></pre></td></tr></table></div></figure>


<h4>项目开发中的问题</h4>

<p>如果修改了app.css或新增css文件，重新编译一次以便生效</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">sencha</span> <span class="nx">app</span> <span class="nx">build</span> <span class="kr">native</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Workspace</h4>

<p>类似xcode加的workspace,执行以下命令以产生一个workspace</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">sencha</span> <span class="nx">generate</span> <span class="nx">workspace</span> <span class="o">&lt;</span><span class="p">..</span><span class="o">/</span><span class="nx">myworkspacefolder</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The generate workspace command will generate workspace metadata in the hidden .sencha folder, which contains the workspace classpath.It will copy the touch framework folder in the root of the workspace folder. The generate workspace command will also create two new (empty) folders: a packages folder, in case you want to download Sencha plug-ins, and a build folder, which will be the location where your build packages will be created and stored.Once you have a workspace, generating apps is the same as before:
<code>javascript
cd &lt;../myworkspacefolder&gt;cd touchsencha generate app -name &lt;namespace}&gt; -path &lt;../appfolder&gt;</code>
<code>Tip</code>
If you want to upgrade to a newer version of Sencha Touch, you can download the latest version from the website and let Sencha Cmd update your folder structure. Here’s an example of how to upgrade the app (or workspace) from the command line:
&#8220;`javascript</p>

<pre><code>sencha app upgrade ../path-new-sdk-folder```When upgrading your framework, you don’t need to worry — it won’t touch your self-written classes. It basically just copies a newer version of the sdk in your application root or workspace, and it might change some metadata in the hidden .sencha folder. However, it’s also possible that it will need to update the app.js, app.json, or bootstrap.js files.
</code></pre>

<h4>Generating a Model with Sencha Cmd</h4>

<p>To create the model definition, you create a new JavaScript file and save it in the app/model directory. But a better choice is to have Sencha Cmd generate it for you.
Here’s the general syntax for implementing the model definition for a Sencha MVC application. On the command line, navigate to the app folder and run the following command:</p>

<figure class='code'><figcaption><span>sencha generate model <MyModelName> <fieldstring></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">```</span>
</span><span class='line'><span class="nx">Make</span> <span class="nx">sure</span> <span class="nx">you</span> <span class="nx">already</span> <span class="nx">have</span> <span class="nx">an</span> <span class="nx">MVC</span> <span class="nx">application</span> <span class="nx">generated</span> <span class="kd">with</span> <span class="nx">Sencha</span> <span class="nx">Cmd</span><span class="p">.</span> <span class="nx">To</span> <span class="nx">generate</span> <span class="nx">our</span> <span class="nx">FindACab</span> <span class="nx">app</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">navigate</span> <span class="nx">to</span> <span class="nx">your</span> <span class="nx">project</span> <span class="nx">folder</span> <span class="nx">and</span> <span class="nx">type</span> <span class="nx">the</span> <span class="nx">following</span><span class="o">:</span>
</span><span class='line'>
</span><span class='line'><span class="err">```</span><span class="nx">javascript</span>
</span><span class='line'>  <span class="nx">sencha</span> <span class="nx">generate</span> <span class="nx">model</span> <span class="nx">Cab</span> <span class="nx">id</span><span class="o">:</span><span class="nx">auto</span><span class="p">,</span><span class="nx">name</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span><span class="nx">latitude</span><span class="o">:</span><span class="kr">float</span><span class="p">,</span><span class="nx">longitude</span><span class="o">:</span><span class="kr">float</span><span class="p">,</span> <span class="nx">address1</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span><span class="nx">phone</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span><span class="nx">state_code</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span><span class="nx">zip</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span><span class="nx">city</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span> <span class="nx">userinput</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span><span class="nx">country_code</span><span class="o">:</span><span class="nx">string</span><span class="p">,</span><span class="nx">avg_rating</span><span class="o">:</span><span class="kr">float</span><span class="p">,</span><span class="nx">distance</span><span class="o">:</span><span class="kr">float</span>
</span><span class='line'><span class="err">```</span>
</span><span class='line'><span class="nx">Sencha</span> <span class="nx">Cmd</span> <span class="nx">will</span> <span class="nx">generate</span> <span class="nx">the</span> <span class="nx">code</span> <span class="nx">shown</span> <span class="nx">below</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
Ext.define(&lsquo;FindACab.model.Cab&rsquo;, {</p>

<pre><code>extend: 'Ext.data.Model',   config: {   fields: [       { name: 'id', type: 'auto' },       { name: 'name', type: 'string' },       { name: 'latitude', type: 'float' },        { name: 'longitude', type: 'float' },       { name: 'address1', type: 'string' },       { name: 'phone', type: 'string' },      { name: 'state_code', type: 'string' },     { name: 'zip', type: 'string' },        { name: 'city', type: 'string' },       { name: 'userinput', type: 'string'},       { name: 'country_code', type: 'string' },       { name: 'avg_rating', type: 'float' },      { name: 'distance', type: 'float' }     ]   }});
</code></pre>

<figure class='code'><figcaption><span>sencha generate model <MyModelName> <fieldstring></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">The</span> <span class="nx">code</span> <span class="k">in</span> <span class="nx">our</span> <span class="nx">newly</span> <span class="nx">generated</span> <span class="nx">JavaScript</span> <span class="nx">file</span> <span class="nx">defines</span> <span class="nx">the</span> <span class="nx">model</span> <span class="nx">Cab</span><span class="p">.</span><span class="nx">js</span><span class="p">.</span>
</span><span class='line'><span class="nx">Every</span> <span class="nx">field</span> <span class="nx">name</span> <span class="nx">has</span> <span class="nx">a</span> <span class="nx">type</span><span class="p">;</span> <span class="k">for</span> <span class="nx">example</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">field</span> <span class="nx">name</span> <span class="nx">phone</span> <span class="nx">has</span> <span class="nx">a</span> <span class="nx">type</span> <span class="nx">string</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">possible</span> <span class="nx">field</span> <span class="nx">types</span> <span class="k">for</span> <span class="nx">a</span> <span class="nx">model</span> <span class="nx">are</span> <span class="nx">string</span><span class="p">,</span> <span class="kr">int</span><span class="p">,</span> <span class="kr">float</span><span class="p">,</span> <span class="kr">boolean</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">auto</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">type</span> <span class="nx">auto</span> <span class="nx">means</span> <span class="nx">there</span> <span class="nx">is</span> <span class="nx">no</span> <span class="nx">type</span> <span class="nx">conversion</span> <span class="nx">at</span> <span class="nx">all</span><span class="p">.</span>
</span><span class='line'><span class="err">定义一个</span><span class="nx">store</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
Ext.define(&lsquo;FindACab.store.Cabs&rsquo;, {</p>

<pre><code>extend: 'Ext.data.Store', 
config: {       model: 'FindACab.model.Cab',        autoLoad: true  }});
</code></pre>

<figure class='code'><figcaption><span>sencha generate model <MyModelName> <fieldstring></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">`</span><span class="nx">Tips</span><span class="err">`</span>
</span><span class='line'><span class="nx">Stores</span> <span class="nx">can</span> <span class="nx">be</span> <span class="nx">written</span> <span class="nx">without</span> <span class="nx">models</span><span class="p">.</span> <span class="nx">You</span> <span class="nx">can</span> <span class="nx">write</span> <span class="nx">the</span> <span class="nx">model</span> <span class="k">in</span><span class="o">-</span><span class="nx">line</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">store</span> <span class="nx">by</span> <span class="nx">just</span> <span class="nx">defining</span> <span class="nx">a</span> <span class="err">`</span><span class="nx">fields</span><span class="err">`</span> <span class="nx">array</span>
</span><span class='line'>
</span><span class='line'><span class="err">####</span> <span class="nx">Generating</span> <span class="nx">a</span> <span class="nx">Controller</span> <span class="kd">with</span> <span class="nx">Sencha</span> <span class="nx">Cmd</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<pre><code>sencha generate controller &lt;MyController&gt;
</code></pre>

<figure class='code'><figcaption><span>sencha generate model <MyModelName> <fieldstring></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">####</span> <span class="nx">Referencing</span> <span class="nx">a</span> <span class="nx">Component</span> <span class="nx">from</span> <span class="nx">a</span> <span class="nx">Controller</span>
</span><span class='line'><span class="nx">When</span> <span class="nx">you</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">create</span> <span class="nx">a</span> <span class="nx">reference</span> <span class="nx">from</span> <span class="nx">the</span> <span class="nx">Sencha</span> <span class="nx">MVC</span> <span class="nx">controller</span> <span class="nx">to</span> <span class="nx">a</span> <span class="nx">component</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">can</span> <span class="nx">either</span> <span class="nx">use</span> <span class="nx">refs</span> <span class="nx">or</span> <span class="nx">you</span> <span class="nx">can</span> <span class="nx">use</span> <span class="nx">the</span> <span class="nx">component</span> <span class="nx">query</span>
</span><span class='line'><span class="nx">Controller</span> <span class="nx">refs</span> <span class="nx">are</span> <span class="nx">available</span> <span class="nx">only</span> <span class="k">in</span> <span class="p">(</span><span class="nx">of</span> <span class="nx">course</span><span class="p">)</span> <span class="nx">the</span> <span class="nx">controller</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
Example 6-3. Defining a Controller reference
refs: { myRef: &lsquo;somextype&rsquo;}</p>

<figure class='code'><figcaption><span>sencha generate model <MyModelName> <fieldstring></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">The</span> <span class="nx">component</span> <span class="nx">query</span> <span class="nx">can</span> <span class="nx">be</span> <span class="nx">used</span> <span class="nx">anywhere</span> <span class="k">in</span> <span class="nx">your</span> <span class="nx">code</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascriptExt.ComponentQuery.query(&lsquo;somextype&rsquo;);&#8220;`
Every ref that is created will automatically generate a getter. In Example 6-3, then, this.getMyRef() would find the component that has the xtype: &ldquo;somextype&rdquo;.</p>

<h4>Listening to Events from a Controller</h4>

<p>When you want to control events in the Sencha MVC controller, add a control object to the controller’s config object. This control object contains a reference to a component (in this example, myref) and adds an event listener with some event that dispatches to myFunction:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">control</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="s1">&#39;myref&#39;</span> <span class="o">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">event</span><span class="o">&gt;:</span> <span class="s1">&#39;myFunction&#39;</span><span class="p">,</span> <span class="p">}</span>
</span><span class='line'><span class="p">},</span>
</span><span class='line'>
</span><span class='line'><span class="err">```</span>
</span><span class='line'><span class="nx">Once</span> <span class="nx">you</span> <span class="nx">have</span> <span class="nx">a</span> <span class="nx">reference</span> <span class="nx">to</span> <span class="nx">a</span> <span class="nx">component</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">can</span> <span class="nx">bind</span> <span class="nx">an</span> <span class="nx">event</span> <span class="nx">to</span> <span class="nx">it</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">trick</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">control</span> <span class="nx">object</span><span class="p">,</span> <span class="nx">which</span> <span class="nx">listens</span> <span class="nx">to</span> <span class="nx">key</span><span class="o">/</span><span class="nx">value</span> <span class="nx">pairs</span><span class="p">.</span> <span class="nx">For</span> <span class="nx">the</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">enter</span> <span class="nx">the</span> <span class="nx">reference</span> <span class="nx">name</span> <span class="p">(</span><span class="nx">the</span> <span class="nx">CSS</span><span class="o">-</span><span class="nx">like</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">or</span> <span class="nx">it</span> <span class="nx">could</span> <span class="nx">also</span> <span class="nx">be</span> <span class="nx">the</span> <span class="nx">xtype</span><span class="p">);</span> <span class="k">this</span> <span class="nx">key</span> <span class="nx">has</span> <span class="nx">another</span> <span class="nx">object</span> <span class="nx">as</span> <span class="nx">a</span> <span class="nx">value</span><span class="p">.</span> <span class="nx">This</span> <span class="nx">object</span> <span class="nx">accepts</span> <span class="nx">the</span> <span class="nx">name</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">event</span> <span class="nx">as</span> <span class="nx">a</span> <span class="nx">key</span> <span class="p">(</span><span class="k">for</span> <span class="nx">example</span><span class="p">,</span> <span class="nx">tap</span> <span class="nx">or</span> <span class="nx">initialize</span><span class="p">)</span> <span class="nx">and</span> <span class="nx">as</span> <span class="nx">a</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">string</span> <span class="nx">name</span> <span class="nx">of</span> <span class="nx">controller</span> <span class="kd">function</span> <span class="nx">that</span> <span class="nx">should</span> <span class="nx">be</span> <span class="nx">called</span> <span class="nx">after</span> <span class="nx">the</span> <span class="nx">event</span> <span class="nx">has</span> <span class="nx">happened</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
Example 6-5. app/controller/CabController.js
Ext.define(&lsquo;FindACab.controller.CabController&rsquo;, {</p>

<pre><code>extend: 'Ext.app.Controller',   config: {   models: ['Cab'],    stores: ['Cabs'],   refs: {     main: 'mainview'    },  control: {      'mainview': {           initialize: 'onInitMain',       }, 
    'button[action=press]': {           tap: 'onTapMain' }      }       },  onInitMain: function() {        console.log("Initialize mainview"); },  onTapMain: function() {     console.log("Tapped a button in mainview");     }});
</code></pre>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">The</span> <span class="nx">CSS</span><span class="o">-</span><span class="nx">like</span> <span class="nx">selector</span> <span class="nx">button</span><span class="p">[</span><span class="nx">action</span><span class="o">=</span><span class="nx">press</span><span class="p">]</span> <span class="nx">invokes</span> <span class="nx">the</span> <span class="nx">controller</span> <span class="nx">method</span> <span class="nx">onTapMain</span><span class="p">(),</span> <span class="nx">which</span> <span class="nx">listens</span> <span class="nx">to</span> <span class="nx">all</span> <span class="nx">button</span> <span class="nx">xtypes</span> <span class="nx">that</span> <span class="nx">have</span> <span class="nx">the</span> <span class="nx">config</span> <span class="nx">action</span><span class="o">:</span> <span class="nx">press</span> <span class="nx">set</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="err">####</span> <span class="nx">Loading</span> <span class="nx">External</span> <span class="nx">Classes</span>
</span><span class='line'>
</span><span class='line'><span class="nx">In</span> <span class="nx">app</span><span class="p">.</span><span class="nx">js</span><span class="p">,</span> <span class="nx">specify</span> <span class="nx">the</span> <span class="nx">paths</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">classes</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">Ext</span><span class="p">.</span><span class="nx">Loader</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
Ext.Loader.setPath({    &lsquo;Ext&rsquo;: &lsquo;touch/src&rsquo;, &lsquo;FindACab&rsquo;: &lsquo;app&rsquo;   &lsquo;<new namespace>&rsquo;: &lsquo;&lt;folder-to-point-to>&rsquo;});</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">This</span> <span class="nx">doesn</span><span class="err">’</span><span class="nx">t</span> <span class="nx">load</span> <span class="nx">anything</span> <span class="k">in</span> <span class="nx">memory</span> <span class="nx">yet</span><span class="p">;</span> <span class="nx">it</span> <span class="nx">just</span> <span class="nx">tells</span> <span class="nx">the</span> <span class="nx">Sencha</span> <span class="nx">Touch</span> <span class="nx">loader</span> <span class="nx">where</span> <span class="nx">to</span> <span class="nx">find</span> <span class="nx">files</span> <span class="nx">that</span> <span class="nx">use</span> <span class="nx">the</span> <span class="nx">Utils</span> <span class="nx">namespace</span><span class="p">.</span> <span class="nx">You</span> <span class="nx">will</span> <span class="nx">use</span> <span class="nx">the</span> <span class="nx">Utils</span><span class="p">.</span><span class="nx">Commons</span> <span class="kr">class</span> <span class="k">in</span> <span class="nx">your</span> <span class="nx">app</span> <span class="nx">so</span> <span class="nx">the</span> <span class="nx">Sencha</span> <span class="nx">Touch</span> <span class="nx">loader</span> <span class="nx">needs</span> <span class="nx">to</span> <span class="nx">load</span> <span class="nx">the</span> <span class="kr">class</span> <span class="k">in</span> <span class="nx">its</span> <span class="nx">memory</span><span class="p">.</span> <span class="nx">Therefore</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">add</span> <span class="nx">Utils</span><span class="p">.</span><span class="nx">Commons</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">requires</span> <span class="nx">array</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">app</span><span class="p">.</span><span class="nx">js</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="nx">The</span> <span class="nx">Utils</span><span class="p">.</span><span class="nx">Commons</span> <span class="kr">class</span> <span class="nx">is</span> <span class="nx">just</span> <span class="nx">a</span> <span class="kr">class</span> <span class="kd">with</span> <span class="kr">static</span> <span class="nx">members</span><span class="p">.</span> <span class="nx">I</span> <span class="nx">can</span> <span class="nx">access</span> <span class="nx">the</span> <span class="nx">defined</span> <span class="nx">properties</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">in</span> <span class="nx">my</span> <span class="nx">code</span><span class="p">.</span> <span class="nx">For</span> <span class="nx">example</span><span class="p">,</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">FindACab</span> <span class="nx">app</span><span class="p">,</span> <span class="nx">I</span> <span class="nx">will</span> <span class="nx">need</span> <span class="nx">to</span> <span class="nx">have</span> <span class="nx">global</span> <span class="nx">access</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">YELP_API</span> <span class="nx">URL</span><span class="p">.</span> <span class="nx">If</span> <span class="nx">I</span> <span class="nx">add</span> <span class="nx">it</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">Utils</span><span class="p">.</span><span class="nx">Commons</span> <span class="kr">class</span><span class="p">,</span> <span class="nx">I</span> <span class="nx">can</span> <span class="nx">access</span> <span class="nx">it</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">in</span> <span class="nx">my</span> <span class="nx">code</span> <span class="nx">by</span> <span class="nx">calling</span> <span class="nx">Utils</span><span class="p">.</span><span class="nx">Common</span><span class="p">.</span><span class="nx">YELP_API</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">code</span> <span class="k">for</span> <span class="nx">Utils</span><span class="p">.</span><span class="nx">Commons</span> <span class="nx">will</span> <span class="nx">look</span> <span class="nx">like</span> <span class="nx">Example</span> <span class="mi">6</span><span class="o">-</span><span class="mi">7</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
Ext.define(&lsquo;Utils.Commons&rsquo;, {</p>

<pre><code>statics: {      YELP_API: 'http://api.yelp.com/business_review_search?', YELP_KEY: 'ftPpQUCgfSA3yV98-uJn9g',        YELP_TERM: 'Taxi',      LOCATION: 'Amsterdam NL',
    getUrl: function() {            return this.YELP_API + "term=" + this.YELP_TERM +
                "&amp;ywsid=" + this.YELP_KEY + 
                "&amp;location=" + this.LOCATION;
    }
}
</code></pre>

<p>});</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Using</span> <span class="nx">the</span> <span class="nx">Ext</span><span class="p">.</span><span class="nx">Loader</span> <span class="nx">is</span> <span class="nx">really</span> <span class="nx">powerful</span><span class="p">.</span> <span class="nx">You</span> <span class="nx">no</span> <span class="nx">longer</span> <span class="nx">have</span> <span class="nx">to</span> <span class="nx">worry</span> <span class="nx">about</span> <span class="nx">loading</span> <span class="nx">scripts</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">correct</span> <span class="nx">order</span><span class="p">.</span>
</span><span class='line'><span class="nx">It</span><span class="err">’</span><span class="nx">s</span> <span class="nx">a</span> <span class="nx">really</span> <span class="nx">good</span> <span class="nx">thing</span> <span class="nx">that</span> <span class="nx">the</span> <span class="nx">Sencha</span> <span class="nx">Touch</span> <span class="nx">loader</span> <span class="nx">takes</span> <span class="nx">care</span> <span class="nx">of</span> <span class="k">this</span><span class="p">.</span> <span class="nx">However</span><span class="p">,</span> <span class="nx">you</span> <span class="k">do</span> <span class="nx">need</span> <span class="nx">to</span> <span class="nx">tell</span> <span class="nx">the</span> <span class="nx">Ext</span><span class="p">.</span><span class="nx">Loader</span><span class="p">,</span> <span class="err">“</span><span class="nx">Hey</span> <span class="nx">loader</span><span class="p">,</span> <span class="nx">I</span> <span class="nx">require</span> <span class="k">this</span> <span class="kr">class</span><span class="p">,</span> <span class="nx">so</span> <span class="nx">don</span><span class="err">’</span><span class="nx">t</span> <span class="nx">forget</span> <span class="nx">to</span> <span class="nx">load</span> <span class="nx">it</span><span class="p">.</span><span class="err">”</span> <span class="nx">You</span> <span class="nx">can</span> <span class="nx">give</span> <span class="k">this</span> <span class="nx">instruction</span> <span class="nx">by</span> <span class="nx">setting</span> <span class="nx">the</span> <span class="nx">requires</span> <span class="nx">array</span> <span class="k">in</span> <span class="nx">a</span> <span class="kr">class</span>
</span><span class='line'>
</span><span class='line'><span class="err">`</span><span class="nx">Note</span><span class="err">`</span>
</span><span class='line'><span class="nx">When</span> <span class="nx">you</span><span class="err">’</span><span class="nx">re</span> <span class="nx">adding</span> <span class="nx">Sencha</span> <span class="nx">classes</span> <span class="nx">to</span> <span class="nx">your</span> <span class="nx">project</span> <span class="nx">and</span> <span class="nx">they</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">saved</span> <span class="nx">within</span> <span class="nx">the</span> <span class="nx">app</span> <span class="nx">folder</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">will</span> <span class="nx">also</span> <span class="nx">need</span> <span class="nx">to</span> <span class="nx">specify</span> <span class="nx">the</span> <span class="nx">paths</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">classpath</span> <span class="nx">used</span> <span class="k">for</span> <span class="nx">the</span> <span class="nx">build</span> <span class="nx">process</span><span class="p">;</span> <span class="nx">otherwise</span><span class="p">,</span> <span class="nx">your</span> <span class="nx">builds</span> <span class="nx">will</span> <span class="nx">fail</span><span class="p">.</span>
</span><span class='line'><span class="nx">There</span> <span class="nx">is</span> <span class="nx">an</span> <span class="err">`</span><span class="nx">app</span><span class="err">`</span> <span class="nx">and</span> <span class="err">`</span><span class="nx">workspace</span> <span class="nx">classpath</span><span class="err">`</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">workspace</span> <span class="nx">classpath</span> <span class="nx">matters</span> <span class="nx">when</span> <span class="nx">you</span> <span class="nx">have</span> <span class="nx">multiple</span> <span class="nx">applications</span> <span class="nx">and</span> <span class="nx">you</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">share</span> <span class="nx">code</span><span class="p">;</span> <span class="k">in</span> <span class="nx">all</span> <span class="nx">other</span> <span class="nx">situations</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">app</span> <span class="nx">classpath</span> <span class="nx">should</span> <span class="nx">be</span> <span class="nx">good</span> <span class="nx">enough</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="nx">In</span> <span class="nx">Chapter</span> <span class="mi">14</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">will</span> <span class="nx">add</span> <span class="nx">the</span> <span class="nx">utils</span> <span class="nx">folder</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">app</span> <span class="nx">classpath</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">hidden</span> <span class="p">.</span><span class="nx">sencha</span><span class="o">/</span><span class="nx">sencha</span><span class="p">.</span><span class="nx">cfg</span> <span class="nx">file</span> <span class="nx">so</span> <span class="nx">the</span> <span class="nx">FindACab</span> <span class="nx">app</span> <span class="nx">can</span> <span class="nx">be</span> <span class="nx">built</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<pre><code>app.classpath=${app.dir}/app.js,${app.dir}/app,${app.dir}/utils
</code></pre>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">You</span> <span class="nx">can</span> <span class="nx">forget</span> <span class="nx">to</span> <span class="nx">inform</span> <span class="nx">the</span> <span class="err">`</span><span class="nx">Ext</span><span class="p">.</span><span class="nx">Loader</span><span class="err">`</span> <span class="nx">about</span> <span class="nx">your</span> <span class="nx">dependencies</span><span class="p">,</span> <span class="nx">or</span> <span class="nx">just</span> <span class="nx">ignore</span> <span class="nx">it</span><span class="p">.</span> <span class="nx">When</span> <span class="nx">you</span> <span class="nx">run</span> <span class="nx">your</span> <span class="nx">application</span> <span class="k">in</span> <span class="nx">debug</span> <span class="nx">mode</span> <span class="p">(</span><span class="nx">you</span> <span class="nx">can</span> <span class="nx">enable</span> <span class="nx">it</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">app</span><span class="p">.</span><span class="nx">json</span> <span class="nx">file</span> <span class="nx">by</span> <span class="nx">loading</span> <span class="nx">the</span> <span class="nx">sencha</span><span class="o">-</span><span class="nx">touch</span><span class="o">-</span><span class="nx">debug</span><span class="p">.</span><span class="nx">js</span> <span class="nx">framework</span> <span class="kd">with</span> <span class="nx">debug</span> <span class="nx">messages</span> <span class="nx">instead</span> <span class="nx">of</span> <span class="nx">sencha</span><span class="o">-</span> <span class="nx">touch</span><span class="p">.</span><span class="nx">js</span><span class="p">),</span> <span class="nx">the</span> <span class="nx">console</span> <span class="nx">will</span> <span class="k">throw</span> <span class="nx">some</span> <span class="nx">warnings</span> <span class="nx">and</span> <span class="nx">indicate</span> <span class="nx">which</span> <span class="nx">classes</span> <span class="nx">you</span> <span class="nx">need</span> <span class="nx">to</span> <span class="nx">require</span>
</span><span class='line'>
</span><span class='line'><span class="err">####</span> <span class="nx">Implementing</span> <span class="nx">a</span> <span class="nx">Form</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<pre><code>sencha generate form -name MyForm -fields field,field2:textfield
</code></pre>

<p>&#8220;`</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>





  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"allentofight"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END --></div>
  </section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 - AllenToFight -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
	

<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->







		</div>
	</div>
</body>
</html>
