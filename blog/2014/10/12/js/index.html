
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Speaking Javascript学习笔记 - AllenToFight Blog</title>
	<meta name="author" content="AllenToFight">

	
	<meta name="description" content="Speaking Javascript学习笔记 Primitive Values Versus Objects JavaScript makes a somewhat arbitrary distinction between values: The primitive values are &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="AllenToFight Blog" type="application/atom+xml">
	
	<link rel="canonical" href="http://xiekunRonaldo.github.io/blog/2014/10/12/js/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/27a0140c11f18fab9bf284743d2b2b4c?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>
<hgroup>
  <h1><a href="/">AllenToFight Blog</a></h1>
  
    <h2>Life To Code.</h2>
  
</hgroup>

<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="weibo" href="http://www.weibo.com/1876496750" title="Weibo">Facebook</a>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Speaking Javascript学习笔记</h1>
	<div class="entry-content" itemprop="articleBody"><h3>Primitive Values Versus Objects</h3>

<p>JavaScript makes a somewhat arbitrary distinction between values:</p>

<ul>
<li>The primitive values are booleans, numbers, strings, null, and undefined.* All other values are objects.
A major difference between the two is how they are compared; each object has a uniqueidentity and is only (strictly) equal to itself:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// an empty object</span>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// another empty object &gt; obj1 === obj2</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj1</span> <span class="o">===</span> <span class="nx">obj1</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Primitive Values</h4>

<ul>
<li>Booleans: true, false * Numbers: 1736, 1.351 * Strings: &lsquo;abc&rsquo;, &ldquo;abc&rdquo; * Two “nonvalues”: undefined, null
Primitives have the following characteristics:</li>
<li><p>Compared by value
&#8220;`</p>

<blockquote><p>3 === 3true> &lsquo;abc&rsquo; === &lsquo;abc&#8217;true&#8220;`</p></blockquote></li>
<li><p>Always immutable</p>

<p>  Properties can’t be changed, added, or removed:</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span><span class="p">;</span>
</span><span class='line'>     <span class="o">&gt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// try to change property `length`</span>
</span><span class='line'>     <span class="o">&gt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="c1">// ⇒ no effect 3</span>
</span><span class='line'>   <span class="o">&gt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// try to create property `foo`</span>
</span><span class='line'>   <span class="o">&gt;</span><span class="nx">str</span><span class="p">.</span><span class="nx">foo</span> <span class="c1">// ⇒ no effect, unknown property undefined</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Objects</h4>

<p>All nonprimitive values are objects.The most common kinds of objects are:</p>

<ul>
<li>Plain objects</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="p">{</span>
</span><span class='line'>            <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Jane&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Doe&#39;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Arrays</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">[</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Regular expressions</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="sr">/^a+b+$/</span>
</span></code></pre></td></tr></table></div></figure>


<p>Objects have the following characteristics:</p>

<ul>
<li>Compared by reference
Identities are compared; every value has its own identity:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="p">{}</span> <span class="o">===</span> <span class="p">{}</span>  <span class="c1">// two different empty objects</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="nx">obj1</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj1</span> <span class="o">===</span> <span class="nx">obj2</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Mutable by default
You can normally freely change, add, and remove properties</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span> <span class="c1">// add property `foo` &gt; obj.foo</span>
</span><span class='line'><span class="mi">123</span>
</span></code></pre></td></tr></table></div></figure>


<h4>undefined and null</h4>

<p>Most programming languages have values denoting missing information. JavaScript has two such “nonvalues,” undefined and null:</p>

<ul>
<li>undefined means “no value.” Uninitialized variables are undefined:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">foo</span>
</span><span class='line'><span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<p>Missing parameters are undefined:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="p">}</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">f</span><span class="p">()</span>
</span><span class='line'><span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you read a nonexistent property, you get undefined:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// empty object </span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span>
</span><span class='line'><span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>null means “no object.” It is used as a nonvalue whenever an object is expected (parameters, last in a chain of objects, etc.)</li>
</ul>


<p><code>Note</code></p>

<p>undefined and null have no properties, not even standard meth‐ ods such as toString().</p>

<h4>Checking for undefined or null</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">x</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can also exploit the fact that both undefined and null are considered false:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Note</code></p>

<p>false, 0, NaN, and &lsquo;&rsquo; are also considered false</p>

<h4>Categorizing Values Using typeof and instanceof</h4>

<p>There are two operators for categorizing values: <code>typeof</code> is mainly used for primitive values, while <code>instanceof</code> is used for objects.</p>

<p>typeof looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">typeof</span> <span class="nx">value</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="k">typeof</span> <span class="kc">true</span>
</span><span class='line'><span class="s1">&#39;boolean&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">typeof</span> <span class="s1">&#39;abc&#39;</span>
</span><span class='line'><span class="s1">&#39;string&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">typeof</span> <span class="p">{}</span> <span class="c1">// empty object literal</span>
</span><span class='line'><span class="s1">&#39;object&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">typeof</span> <span class="p">[]</span> <span class="c1">// empty array literal</span>
</span><span class='line'><span class="s1">&#39;object&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The following table lists all results of typeof:</p>

<table>
<thead>
<tr>
<th> Operand </th>
<th> Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>undefined </td>
<td> undefined  </td>
</tr>
<tr>
<td>null </td>
<td> &lsquo;object&rsquo;</td>
</tr>
<tr>
<td>Boolean value </td>
<td> &lsquo;boolean&rsquo;</td>
</tr>
<tr>
<td>Number value </td>
<td> &lsquo;number&rsquo;</td>
</tr>
<tr>
<td>String value </td>
<td> &lsquo;string&rsquo;</td>
</tr>
<tr>
<td>Function </td>
<td> &lsquo;function&rsquo;</td>
</tr>
<tr>
<td>All other normal values </td>
<td> &lsquo;object&rsquo;</td>
</tr>
<tr>
<td>(Engine-created value) </td>
<td> JavaScript engines are allowed to create values for whichtypeofreturns arbitrary strings (different from all results listed in this table).</td>
</tr>
</tbody>
</table>


<p><code>Note</code>
typeof null returning &lsquo;object&rsquo; is a bug that can’t be fixed, because it would break existing code. It does not mean that null is an object.</p>

<p>instanceof looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">value</span> <span class="k">instanceof</span> <span class="nx">Constr</span>
</span></code></pre></td></tr></table></div></figure>


<p>It returns true if value is an object that has been created by the constructor Constr</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Bar</span><span class="p">();</span> <span class="c1">// object created by constructor Bar &gt; b instanceof Bar</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="p">{}</span> <span class="k">instanceof</span> <span class="nb">Object</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="p">[]</span> <span class="k">instanceof</span> <span class="nb">Array</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="p">[]</span> <span class="k">instanceof</span> <span class="nb">Object</span>  <span class="c1">// Array is a subconstructor of Object</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="kc">undefined</span> <span class="k">instanceof</span> <span class="nb">Object</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="kc">null</span> <span class="k">instanceof</span> <span class="nb">Object</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Truthy and Falsy</h4>

<p>The following values are interpreted as false:</p>

<ul>
<li>undefined,null</li>
<li>Boolean:false</li>
<li>Number:-0,NaN</li>
<li>String:&lsquo;&rsquo;
Boolean(), called as a function, converts its parameter to a boolean. You can use it to test how a value is interpreted:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">Boolean</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Boolean</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Boolean</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Boolean</span><span class="p">({})</span> <span class="c1">// empty object</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Boolean</span><span class="p">([])</span> <span class="c1">// empty array</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Numbers</h4>

<p>All numbers in JavaScript are floating-point:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">===</span> <span class="mf">1.0</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Special numbers include the following:</p>

<ul>
<li>NaN (“not a number”)</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="nx">An</span> <span class="nx">error</span> <span class="nx">value</span><span class="o">:</span>
</span><span class='line'>        <span class="o">&gt;</span> <span class="nb">Number</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">)</span>  <span class="c1">// &#39;xyz&#39; can’t be converted to a number</span>
</span><span class='line'>      <span class="kc">NaN</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Infinity
Also mostly an error value:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span><span class="mi">3</span><span class="o">/</span> <span class="mi">0</span>
</span><span class='line'><span class="kc">Infinity</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>  <span class="c1">// number too large</span>
</span><span class='line'><span class="kc">Infinity</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Strings</h4>

<p>Single characters are accessed via square brackets:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="s1">&#39;b&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h5>String Methods</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;abc&#39;</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">// copy a substring</span>
</span><span class='line'><span class="s1">&#39;bc&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;abc&#39;</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;b&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Function Declarations Are Hoisted</h4>

<p>Function declarations are hoisted—moved in their entirety to the beginning of the cur‐ rent scope. That allows you to refer to functions that are declared later:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">bar</span><span class="p">();</span> <span class="c1">// OK, bar is hoisted </span>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">bar</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="p">...</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that while var declarations are also hoisted (see “Variables Are Hoisted” on page 23), assignments performed by them are not:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">bar</span><span class="p">();</span> <span class="c1">// Not OK, bar is still undefined </span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// ...</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Too Many or Too Few Arguments</h4>

<p>Let’s use the following function to explore how too many or too few parameters are handled in JavaScript</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">toArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Additional parameters will be ignored (except by arguments):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nx">f</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nx">ab</span>
</span><span class='line'><span class="p">[</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Missing parameters will get the value undefined:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nx">f</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nx">a</span> <span class="kc">undefined</span>
</span><span class='line'><span class="p">[</span> <span class="s1">&#39;a&#39;</span> <span class="p">]</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">f</span><span class="p">()</span>
</span><span class='line'><span class="kc">undefined</span> <span class="kc">undefined</span> <span class="p">[]</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Optional Parameters</h4>

<p>The following is a common pattern for assigning default values to parameters:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">pair</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// (1) </span>
</span><span class='line'>  <span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">[</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Enforcing an Arity</h4>

<p>If you want to enforce an arity (a specific number of parameters), you can check arguments.length:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">pair</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Need exactly 2 arguments&#39;</span><span class="p">);</span> <span class="p">}</span>
</span><span class='line'>  <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Converting arguments to an Array</h4>

<p>arguments is not an array, it is only array-like (see “Array-Like Objects and Generic Methods” on page 262). It has a property length, and you can access its elements via indices in square brackets. You cannot, however, remove elements or invoke any of the array methods on it. Thus, you sometimes need to convert arguments to an array</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">toArray</span><span class="p">(</span><span class="nx">arrayLikeObject</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arrayLikeObject</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>`</p>

<h4>Exception Handling</h4>

<p>The most common way to handle exceptions (see Chapter 14) is as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">getPerson</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;ID must not be negative: &#39;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">id</span><span class="o">:</span> <span class="nx">id</span>
</span><span class='line'>    <span class="p">};</span> <span class="c1">// normally: retrieved from database }</span>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">getPersons</span><span class="p">(</span><span class="nx">ids</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>        <span class="nx">ids</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>                <span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">getPerson</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span class='line'>                <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">person</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">exception</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">exception</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The try clause surrounds critical code, and the catch clause is executed if an exception is thrown inside the try clause. Using the preceding code:
&#8220;`</p>

<blockquote><p>getPersons([2, -5, 137])    [Error: ID must not be negative: -5]    [ { id: 2 }, { id: 137 } ]&#8220;`</p>

<h4>Strict Mode</h4>

<p>Strict mode (see <code>Strict Mode</code> on page 62) enables more warnings and makes JavaScript a cleaner language (nonstrict mode is sometimes called <code>sloppy mode</code>). To switch it on, type the following line first in a JavaScript file or a <code>&lt;script&gt;</code> tag:<code>
'use strict';</code>You can also enable strict mode per function:
&#8220;`
function functionInStrictMode() {</p>

<pre><code>'use strict';}```
</code></pre>

<h4>Variables Are Function-Scoped</h4>

<p>The scope of a variable is always the complete function (as opposed to the current block). For example:
&#8220;`
function foo() {</p>

<pre><code>var x = -512;
if (x &lt; 0) { // (1) var tmp = -x;
    ...
}
console.log(tmp); // 512 
</code></pre>

<p>}&#8220;`
We can see that the variable tmp is not restricted to the block starting in line (1); it exists until the end of the function.</p>

<h4>Variables Are Hoisted</h4>

<p>Each variable declaration is <code>hoisted</code>: the declaration is moved to the <code>beginning</code> of the function, but assignments that it makes stay put. As an example, consider the variable declaration in line (1) in the following function:
&#8220;`
function foo() {</p>

<pre><code>console.log(tmp); // undefined 
if (false) {
    var tmp = 3; // (1) 
}
</code></pre>

<p>}<code>
Internally, the preceding function is executed like this:
</code>
function foo() {</p>

<pre><code>var tmp; // hoisted declaration 
console.log(tmp);
if (false) {
    tmp = 3; // assignment stays put 
}
</code></pre>

<p>}&#8220;`</p>

<h4>Closures</h4>

<p>Each function stays connected to the variables of the functions that surround it, even after it leaves the scope in which it was created. For example:</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">createIncrementor</span><span class="p">(</span><span class="nx">start</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// (1)</span>
</span><span class='line'>        <span class="nx">start</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">start</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">inc</span> <span class="o">=</span> <span class="nx">createIncrementor</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">inc</span><span class="p">()</span>
</span><span class='line'><span class="mi">6</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">inc</span><span class="p">()</span>
</span><span class='line'><span class="mi">7</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">inc</span><span class="p">()</span>
</span><span class='line'><span class="mi">8</span>
</span></code></pre></td></tr></table></div></figure>


<p>A closure is a function plus the connection to the variables of its surrounding scopes. Thus, what createIncrementor() returns is a closure.</p>

<h4>The IIFE Pattern: Introducing a New Scope</h4>

<p>Sometimes you want to introduce a new variable scope—for example, to prevent a vari‐able from becoming global. In JavaScript, you can’t use a block to do so; you must use a function. But there is a pattern for using a function in a block-like manner. It is called IIFE (immediately invoked function expression, pronounced “iffy”):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c1">// open IIFE</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// not a global variable</span>
</span><span class='line'><span class="p">}());</span> <span class="c1">// close IIFE</span>
</span></code></pre></td></tr></table></div></figure>


<p>An IIFE is a function expression that is called <code>immediately</code> after you define it. Inside the function, a new scope exists, preventing tmp from becoming global</p>

<h5>IIFE use case: inadvertent sharing via closures</h5>

<p>Closures keep their connections to outer variables, which is sometimes not what you want:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">i</span>
</span><span class='line'>    <span class="p">});</span> <span class="c1">// (1) </span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]());</span> <span class="c1">// 5 (not 1) </span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">[</span><span class="mi">3</span><span class="p">]());</span> <span class="c1">// 5 (not 3)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The value returned in line (1) is always the current value of i, not the value it had when the function was created. After the loop is finished, i has the value 5, which is why all functions in the array return that value. If you want the function in line (1) to receive a snapshot of the current value of i, you can use an IIFE:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">i2</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span> <span class="c1">// copy current i</span>
</span><span class='line'>        <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">i2</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>    <span class="p">}());</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Objects and Constructors</h4>

<ul>
<li>Single Objects</li>
</ul>


<p>In JavaScript, you can directly create plain objects, via object literals:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">jane</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Jane&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">describe</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s1">&#39;Person named &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>The in operator checks whether a property exists:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="s1">&#39;newProperty&#39;</span> <span class="k">in</span> <span class="nx">jane</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;foo&#39;</span> <span class="k">in</span> <span class="nx">jane</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you read a property that does not exist, you get the value undefined. Hence, the previous two checks could also be performed like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="nx">jane</span><span class="p">.</span><span class="nx">newProperty</span> <span class="o">!==</span> <span class="kc">undefined</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">jane</span><span class="p">.</span><span class="nx">foo</span> <span class="o">!==</span> <span class="kc">undefined</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>The delete operator removes a property:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="k">delete</span> <span class="nx">jane</span><span class="p">.</span><span class="nx">newProperty</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Arbitrary Property Keys</h4>

<p>A property key can be any string. So far, we have seen property keys in object literals and after the dot operator. However, you can use them that way <code>only if</code> they are <code>identifiers</code> (see “Identifiers and Variable Names” on page 6). If you want to use other strings as keys, you have to quote them in an object literal and use square brackets to get and set the property:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;not an identifier&#39;</span><span class="o">:</span> <span class="mi">123</span> <span class="p">};</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj</span><span class="p">[</span><span class="s1">&#39;not an identifier&#39;</span><span class="p">]</span>
</span><span class='line'><span class="mi">123</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj</span><span class="p">[</span><span class="s1">&#39;not an identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">456</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Square brackets also allow you to compute the key of a property:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">hello</span><span class="o">:</span> <span class="s1">&#39;world&#39;</span> <span class="p">};</span>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">x</span><span class="p">]</span>
</span><span class='line'><span class="s1">&#39;world&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj</span><span class="p">[</span><span class="s1">&#39;hel&#39;</span><span class="o">+</span><span class="s1">&#39;lo&#39;</span><span class="p">]</span>
</span><span class='line'><span class="s1">&#39;world&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Extracting Methods</h4>

<p>If you extract a method, it loses its connection with the object. On its own, the function is not a method anymore, and this has the value undefined (in strict mode).
As an example, let’s go back to the earlier object jane:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">jane</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Jane&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">describe</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s1">&#39;Person named &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>We want to extract the method describe from jane, put it into a variable func, and call it. However, that doesn’t work:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">func</span> <span class="o">=</span> <span class="nx">jane</span><span class="p">.</span><span class="nx">describe</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">func</span><span class="p">()</span>
</span><span class='line'><span class="nx">TypeError</span><span class="o">:</span> <span class="nx">Cannot</span> <span class="nx">read</span> <span class="nx">property</span> <span class="s1">&#39;name&#39;</span> <span class="nx">of</span> <span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<p>The solution is to use the method bind() that all functions have. It creates a new function whose this always has the given value:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">func2</span> <span class="o">=</span> <span class="nx">jane</span><span class="p">.</span><span class="nx">describe</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">jane</span><span class="p">);</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">func2</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;Person named Jane&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Functions Inside a Method</h5>

<p>Every function has its own special variable this. This is inconvenient if you nest a function inside a method, because you can’t access the method’s this from the function. The following is an example where we call forEach with a function to iterate over an array:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">jane</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Jane&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">friends</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Tarzan&#39;</span><span class="p">,</span> <span class="s1">&#39;Cheeta&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="nx">logHiToFriends</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="k">this</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">friend</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// `this` is undefined here</span>
</span><span class='line'>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39; says hi to &#39;</span> <span class="o">+</span> <span class="nx">friend</span><span class="p">);</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Calling logHiToFriends produces an error:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nx">jane</span><span class="p">.</span><span class="nx">logHiToFriends</span><span class="p">()</span>
</span><span class='line'><span class="nx">TypeError</span><span class="o">:</span> <span class="nx">Cannot</span> <span class="nx">read</span> <span class="nx">property</span> <span class="s1">&#39;name&#39;</span> <span class="nx">of</span> <span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let’s look at two ways of fixing this.</p>

<ul>
<li>First, we could store this in a different variable:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">logHiToFriends</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">friend</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39; says hi to &#39;</span> <span class="o">+</span> <span class="nx">friend</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>forEach has a second parameter that allows you to provide a value for this:
<code>
logHiToFriends: function() {
  'use strict';
  this.friends.forEach(function(friend, this) {
      console.log(this.name + ' says hi to ' + friend);
  }, this);
}</code>

<h4>Constructors: Factories for Objects</h4>

<p>JavaScript objects also support a feature that is truly object-oriented: inheritance</p></li>
</ul>


<p> In addition to being “real” functions and methods, functions play another role in Java‐ Script: they become constructors—factories for objects—if invoked via the <code>new</code> operator.</p>

<p>Constructors are thus a rough analog to classes in other languages. By convention, the names of constructors start with <code>capital letters</code>. For example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Set up instance data</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="c1">// Methods</span>
</span><span class='line'><span class="nx">Point</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">dist</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can see that a constructor has two parts. First, the function Point sets up the instance data. Second, the property Point.prototype contains an object with the methods. The former data is specific to each instance, while the latter data is shared among all instances.&#8220;&#8220;</p>

<blockquote><p>var p = new Point(3, 5);
p.x3> p.dist()
5.830951894845301> p instanceof Pointtrue&#8220;`</p>

<h4>Arrays</h4>

<p>The length property indicates how many elements an array has. You can use it to append elements and to remove elements:</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">];</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span>
</span><span class='line'><span class="mi">2</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span>
</span><span class='line'><span class="p">[</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="p">]</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span>
</span><span class='line'><span class="mi">3</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span>
</span><span class='line'><span class="p">[</span> <span class="s1">&#39;a&#39;</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>in</code> operator works for arrays, too:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="p">];</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">1</span> <span class="k">in</span> <span class="nx">arr</span> <span class="c1">// is there an element at index 1? </span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">5</span> <span class="k">in</span> <span class="nx">arr</span> <span class="c1">// is there an element at index 5? </span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that arrays are objects and can thus have object properties:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">foo</span>
</span><span class='line'><span class="mi">123</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Array Methods</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="p">];</span>
</span><span class='line'><span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>  <span class="c1">// append an element</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span>  <span class="c1">// remove last element</span>
</span><span class='line'><span class="s1">&#39;x&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span>
</span><span class='line'><span class="p">[</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="p">]</span>
</span><span class='line'>
</span><span class='line'> <span class="o">&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>  <span class="c1">// remove first element</span>
</span><span class='line'><span class="s1">&#39;a&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span>
</span><span class='line'><span class="p">[</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="p">]</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>  <span class="c1">// prepend an element</span>
</span><span class='line'><span class="mi">3</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">arr</span>
</span><span class='line'><span class="p">[</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Iterating over Arrays</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">[</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span> <span class="p">].</span><span class="nx">forEach</span><span class="p">(</span>
</span><span class='line'><span class="kd">function</span> <span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// (1)</span>
</span><span class='line'>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">index</span> <span class="o">+</span> <span class="s1">&#39;. &#39;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">);</span>
</span><span class='line'>        <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>map creates a new array by applying a function to each element of an existing array:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="p">})</span>
</span><span class='line'><span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Regular Expressions</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="sr">/^a+b+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;aaab&#39;</span><span class="p">)</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="sr">/^a+b+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;aaa&#39;</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Method exec(): Match and Capture Groups</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="sr">/a(b+)a/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="s1">&#39;_abbba_aba_&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span> <span class="s1">&#39;abbba&#39;</span><span class="p">,</span> <span class="s1">&#39;bbb&#39;</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>The returned array contains the complete match at index 0, the capture of the first group at index 1, and so on.</p>

<h5>Method replace(): Search and Replace</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;&lt;a&gt; &lt;bbb&gt;&#39;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;(.*?)&gt;/g</span><span class="p">,</span> <span class="s1">&#39;[$1]&#39;</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;[a] [bbb]&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Evaluating an object literal via eval()</h4>

<p>eval parses its argument in statement context. You have to put parentheses around an object literal if you want eval to return an object:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;{ foo: 123 }&#39;</span><span class="p">)</span>
</span><span class='line'><span class="mi">123</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;({ foo: 123 })&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="mi">123</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Immediately invoking a function expression</h4>

<p>The following code is an <code>immediately invoked function expression</code> (IIFE), a function whose body is executed right away
If you omit the parentheses, you get a syntax error, because JavaScript sees a function declaration, which can’t be anonymous:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;abc&#39;</span> <span class="p">}()</span>
</span><span class='line'><span class="nx">SyntaxError</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">statement</span> <span class="nx">requires</span> <span class="nx">a</span> <span class="nx">name</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you add a name, you also get a syntax error, because function declarations can’t be immediately invoked:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;abc&#39;</span> <span class="p">}()</span>
</span><span class='line'><span class="nx">SyntaxError</span><span class="o">:</span> <span class="nx">Unexpected</span> <span class="nx">token</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Invoking Methods on Number Literals</h4>

<p>With method invocations, it is important to distinguish between the floating-point dot and the method invocation dot. Thus, you cannot write 1.toString(); you must use one of the following alternatives:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="mi">1</span><span class="p">..</span><span class="nx">toString</span><span class="p">()</span>
</span><span class='line'><span class="mi">1</span> <span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// space before dot </span>
</span><span class='line'><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">toString</span><span class="p">()</span>
</span><span class='line'><span class="mf">1.0</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Strict Mode</h4>

<ul>
<li>Variables Must Be Declared in Strict Mode</li>
<li><p>Functions in Strict Mode</p>

<p>  Functions must be declared at the top level of a scope</p>

<p>  In strict mode, all functions must be declared at the top level of a scope (global scope or directly inside a function</p>

<p>  <code>
  function strictFunc() {
  'use strict'; {
      // SyntaxError:
      function nested() {}
  }
}
 </code>
If you want to work around this limitation, you can create a function inside a block via a variable declaration and a function expression:
<code>
function strictFunc() {
  'use strict';
  {
      // OK:
      var nested = function() {};
  }
}</code></p></li>
<li>The arguments objects has fewer properties</li>
</ul>


<p>The arguments object is simpler in strict mode: the properties arguments.callee and arguments.caller have been eliminated, you can’t assign to the variable arguments, and arguments does not track changes to parameters (if a parameter changes, the cor‐ responding array element does not change with it).</p>

<ul>
<li>this is undefined in nonmethod functions</li>
</ul>


<p>In sloppy mode, the value of this in nonmethod functions is the global object (window in browsers;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">sloppyFunc</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nb">window</span><span class="p">);</span> <span class="c1">// true</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>In strict mode, it is undefined:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">strictFunc</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">);</span> <span class="c1">// true </span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is useful for constructors. For example, the following constructor, Point, is in strict mode:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Due to strict mode, you get a warning when you accidentally forget new and call it as a function:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">pt</span> <span class="o">=</span> <span class="nx">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="nx">TypeError</span><span class="o">:</span> <span class="nx">Cannot</span> <span class="nx">set</span> <span class="nx">property</span> <span class="s1">&#39;x&#39;</span> <span class="nx">of</span> <span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Setting and Deleting Immutable Properties Fails with an Exception in Strict Mode</h5>

<p>Illegal manipulations of properties throw exceptions in strict mode. For example, at‐ tempting to set the value of a read-only property throws an exception, as does attempting to delete a nonconfigurable property
&#8220;`var str = &lsquo;abc&rsquo;;</p>

<p>function sloppyFunc() {</p>

<pre><code>str.length = 7; // no effect, silent failure
console.log(str.length); // 3 
</code></pre>

<p>}</p>

<p>function strictFunc() {</p>

<pre><code>'use strict';
str.length = 7; // TypeError: Cannot assign to // read-only property 'length'
</code></pre>

<p>}&#8220;&#8220;</p>

<h5>Unqualified Identifiers Can’t Be Deleted in Strict Mode</h5>

<p>In sloppy mode, you can delete a global variable foo like this:
<code>
delete foo</code>
In strict mode, you get a syntax error whenever you try to delete unqualified identifiers. You can still delete global variables like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">delete</span> <span class="nb">window</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span> <span class="c1">// browsers</span>
</span><span class='line'><span class="k">delete</span> <span class="nx">global</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span> <span class="c1">// Node.js</span>
</span><span class='line'><span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span> <span class="c1">// everywhere (in global scope)</span>
</span></code></pre></td></tr></table></div></figure>


<h5>eval() Is Cleaner in Strict Mode</h5>

<p>In strict mode, the eval() function becomes less quirky: variables declared in the eval‐ uated string are not added to the scope surrounding eval() anymore.</p>

<h5>Features That Are Forbidden in Strict Mode</h5>

<p>Two more JavaScript features are forbidden in strict mode:</p>

<ul>
<li>The <code>with</code> statementisnotallowedanymore(see“ThewithStatement”onpage153). You get a syntax error at compile time (when loading the code).</li>
<li>Nomoreoctalnumbers:insloppymode,anintegerwithaleadingzeroisinterpreted as octal (base 8). For example:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="mi">010</span> <span class="o">===</span> <span class="mi">8</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>In strict mode, you get a syntax error if you use this kind of literal:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span> <span class="s1">&#39;use strict&#39;</span><span class="p">;</span> <span class="k">return</span> <span class="mi">010</span> <span class="p">}</span>
</span><span class='line'><span class="nx">SyntaxError</span><span class="o">:</span> <span class="nx">Octal</span> <span class="nx">literals</span> <span class="nx">are</span> <span class="nx">not</span> <span class="nx">allowed</span> <span class="k">in</span> <span class="nx">strict</span> <span class="nx">mode</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<h4>　JavaScript’s Type System</h4>

<h5>Coercion</h5>

<p>In JavaScript, the main way of dealing with a value whose type doesn’t fit is to coerce it to the correct type. Coercion means implicit type conversion. Most operands coerce:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;3&#39;</span> <span class="o">*</span> <span class="s1">&#39;4&#39;</span>
</span><span class='line'><span class="mi">12</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Primitive Values Versus Objects</h5>

<p>In contrast, all primitive values encoding the same value are considered the same:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">prim1</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">prim2</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">prim1</span> <span class="o">===</span> <span class="nx">prim2</span> <span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Primitives have the following characteristics:</h5>

<ul>
<li>Compared by value</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="mi">3</span> <span class="o">===</span> <span class="mi">3</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;abc&#39;</span> <span class="o">===</span> <span class="s1">&#39;abc&#39;</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Always immutable</li>
</ul>


<p>Properties can’t be changed, added, or removed:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// try to change property `length`</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="c1">// ⇒ no effect 3</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// try to create property `foo` </span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">str</span><span class="p">.</span><span class="nx">foo</span> <span class="c1">// ⇒ no effect, unknown property undefined</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>A fixed set of types</li>
</ul>


<p>You can’t define your own primitive types.</p>

<h4>Objects</h4>

<ul>
<li>Mutable by default</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span> <span class="c1">// add property `foo` &gt; obj.foo</span>
</span><span class='line'><span class="mi">123</span>
</span></code></pre></td></tr></table></div></figure>


<h4>undefined and null</h4>

<ul>
<li><code>undefined</code> means “<code>novalue</code>”(neitherprimitivenorobject).Uninitialized variables, missing parameters, and missing properties have that nonvalue. And functions <code>implicitly</code> return it if nothing has been explicitly returned.</li>
<li><code>null</code> means “<code>no object</code>.” It is used as a nonvalue where an object is expected (as a parameter, as a member in a chain of objects, etc.).</li>
</ul>


<p>undefined and null are the only values for which any kind of property access results in an exception:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="kd">function</span> <span class="nx">returnFoo</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">foo</span> <span class="p">}</span>
</span><span class='line'> <span class="o">&gt;</span> <span class="nx">returnFoo</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span><span class='line'><span class="kc">undefined</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">returnFoo</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="kc">undefined</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">returnFoo</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span><span class='line'><span class="nx">TypeError</span><span class="o">:</span> <span class="nx">Cannot</span> <span class="nx">read</span> <span class="nx">property</span> <span class="s1">&#39;foo&#39;</span> <span class="nx">of</span> <span class="kc">null</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">returnFoo</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'><span class="nx">TypeError</span><span class="o">:</span> <span class="nx">Cannot</span> <span class="nx">read</span> <span class="nx">property</span> <span class="s1">&#39;foo&#39;</span> <span class="nx">of</span> <span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>undefined</code> is also sometimes used as more of a metavalue that indicates <code>nonexistence</code>. In contrast, <code>null</code> indicates <code>emptiness</code>.</p>

<p> For example, a JSON node visitor (see “Trans‐ forming Data via Node Visitors” on page 341) returns:</p>

<ul>
<li>undefined to remove an object property or array element</li>
<li>null to set the property or element to null</li>
</ul>


<h5>Occurrences of undefined and null</h5>

<h6>Occurrences of undefined</h6>

<ul>
<li>Uninitialized variables are undefined:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">foo</span> <span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Missing parameters are undefined:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="p">}</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">f</span><span class="p">()</span>
</span><span class='line'><span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>If you read a nonexistent property, you get undefined:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// empty object </span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span>
</span><span class='line'><span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<p>And functions implicitly return undefined if nothing has been explicitly returned:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{}</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">f</span><span class="p">()</span>
</span><span class='line'><span class="kc">undefined</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">function</span> <span class="nx">g</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">g</span><span class="p">()</span>
</span><span class='line'><span class="kc">undefined</span>
</span></code></pre></td></tr></table></div></figure>


<h6>Occurrences of null</h6>

<ul>
<li>null is the last element in the prototype chain(a chain of objects;see“Layer2:The Prototype Relationship Between Objects” on page 211):</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span>
</span><span class='line'><span class="kc">null</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>null is returned byRegExp.prototype.exec()if there was no match for the regular expression in the string:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="sr">/x/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="s1">&#39;aaa&#39;</span><span class="p">)</span>
</span><span class='line'><span class="kc">null</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Checking for undefined or null</h4>

<h4>Checking for null</h4>

<p>You check for null via strict equality:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Checking for undefined</h4>

<p>Strict equality (===) is the canonical way of checking for undefined:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Checking for either undefined or null</h4>

<p>Most functions allow you to indicate a missing value via either undefined or null. One way of checking for both of them is via an explicit comparison:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Does x have a value?</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>    <span class="c1">// Is x a non-value?</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">x</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Another way is to exploit the fact that both undefined and null are considered false</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Does x have a value (is it truthy)?</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="c1">// Is x falsy?</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>false, 0, NaN, and &lsquo;&rsquo; are <code>also</code> considered false.</p>

<h4>Changing undefined</h4>

<p>undefined is a property of the global object (and thus a global variable; see “The Global Object” on page 187). Under ECMAScript 3, you had to take precautions when reading undefined, because it was easy to accidentally change its value. Under ECMAScript 5, that is not necessary, because undefined is read-only.</p>

<p>To protect against a changed undefined, two techniques were popular (they are still relevant for older JavaScript engines):
* Technique 1</p>

<p>Shadow the global undefined (which may have the wrong value):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">...</span> <span class="c1">// safe now</span>
</span><span class='line'><span class="p">}());</span> <span class="c1">// don’t hand in a parameter</span>
</span></code></pre></td></tr></table></div></figure>


<p>`
In the preceding code, undefined is guaranteed to have the right value, because itis a parameter whose value has not been provided by the function call.
* Technique 2
Compare with void 0, which is always (the correct) undefined
<code>
if (x === void 0) // always safe</code></p>

<h4>Wrapper Objects for Primitives</h4>

<p>The three primitive types boolean, number, and string have corresponding constructors: Boolean, Number, String. Their instances (so-called wrapper objects) contain (wrap) primitive values. The constructors can be used in two ways:
* Asconstructors,theycreateobjectsthatarelargelyincompatiblewiththeprimitive values that they wrap:
&#8220;`</p>

<blockquote><p>typeof new String(&lsquo;abc&rsquo;)&lsquo;object&rsquo;> new String(&lsquo;abc&rsquo;) === &lsquo;abc&#8217;false&#8220;`
* As functions,they convert values to the corresponding primitive types(see“Functions for Converting to Boolean, Number, String, and Object” on page 78). This is the recommended method of conversion:</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nb">String</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;123&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>It’s considered a best practice to avoid wrapper objects. You normal‐ ly don’t need them, as there is nothing that objects can do that primitives can’t (with the exception of being mutated).</p>

<h4>Wrapper Objects Are Different from Primitives</h4>

<p>Primitive values such as &lsquo;abc&rsquo; are fundamentally different from wrapper instances such as new String(&lsquo;abc&rsquo;):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="k">typeof</span> <span class="s1">&#39;abc&#39;</span>  <span class="c1">// a primitive value</span>
</span><span class='line'><span class="s1">&#39;string&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">typeof</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>  <span class="c1">// an object</span>
</span><span class='line'><span class="s1">&#39;object&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;abc&#39;</span> <span class="k">instanceof</span> <span class="nb">String</span>  <span class="c1">// never true for primitives</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;abc&#39;</span> <span class="o">===</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>Wrapper instances are objects, and there is no way of comparing objects in JavaScript, not even via lenient equals == (see “Equality Operators: === Versus ==” on page 83):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">);</span>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">);</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Wrapping and Unwrapping Primitives</h4>

<p>There is one use case for wrapper objects: you want to add properties to a primitive value. Then you wrap the primitive and add properties to the wrapper object. You need to unwrap the value before you can work with it.</p>

<p>Wrap a primitive by invoking a wrapper constructor:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span><span class='line'><span class="k">new</span> <span class="nb">Number</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span class='line'><span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Unwrap a primitive by invoking the method <code>valueOf()</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="nx">valueOf</span><span class="p">()</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">new</span> <span class="nb">Number</span><span class="p">(</span><span class="mi">123</span><span class="p">).</span><span class="nx">valueOf</span><span class="p">()</span>
</span><span class='line'><span class="mi">123</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">).</span><span class="nx">valueOf</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;abc&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Converting wrapper objects to primitives properly extracts numbers and strings, but not booleans:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nb">Boolean</span><span class="p">(</span><span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="kc">false</span><span class="p">))</span>  <span class="c1">// does not unwrap</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Number</span><span class="p">(</span><span class="k">new</span> <span class="nb">Number</span><span class="p">(</span><span class="mi">123</span><span class="p">))</span>  <span class="c1">// unwraps</span>
</span><span class='line'><span class="mi">123</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">String</span><span class="p">(</span><span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>  <span class="c1">// unwraps</span>
</span><span class='line'><span class="s1">&#39;abc&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Primitives Borrow Their Methods from Wrappers</h5>

<p>Primitives don’t have their own methods and borrow them from wrappers:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;abc&#39;</span><span class="p">.</span><span class="nx">charAt</span> <span class="o">===</span> <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">charAt</span>
</span><span class='line'><span class="o">&gt;</span> <span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Sloppy mode and strict mode handle this borrowing differently. In sloppy mode, prim‐ itives are <code>converted to wrappers</code> on the fly:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sloppyMethod</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">);</span> <span class="c1">// object </span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nb">String</span><span class="p">);</span> <span class="c1">// true</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="s1">&#39;&#39;</span><span class="p">.</span><span class="nx">sloppyMethod</span><span class="p">();</span> <span class="c1">// call the above method</span>
</span></code></pre></td></tr></table></div></figure>


<p>In strict mode, methods from the wrapper prototype are used transparently:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">strictMethod</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">);</span> <span class="c1">// string</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nb">String</span><span class="p">);</span> <span class="c1">// false };</span>
</span><span class='line'>  <span class="s1">&#39;&#39;</span><span class="p">.</span><span class="nx">strictMethod</span><span class="p">();</span> <span class="c1">// call the above method</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Type Coercion</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;3&#39;</span> <span class="o">*</span> <span class="s1">&#39;4&#39;</span>
</span><span class='line'><span class="mi">12</span>
</span></code></pre></td></tr></table></div></figure>


<p>As another example, if one of the operands is a string, the plus operator (+) converts the other one to a string:&#8220;`</p>

<blockquote><p>3 + &lsquo; times&rsquo;&lsquo;3 times&rsquo;&#8220;`</p>

<h5>Type Coercion Can Hide Bugs</h5></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">formData</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">width</span><span class="o">:</span> <span class="s1">&#39;100&#39;</span> <span class="p">};</span>
</span><span class='line'><span class="c1">// You think formData.width is a number // and get unexpected results</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">formData</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">outer</span> <span class="o">=</span> <span class="nx">w</span> <span class="o">+</span> <span class="mi">20</span><span class="p">;</span>
</span><span class='line'><span class="c1">// You expect outer to be 120, but it’s not console.log(outer === 120); // false console.log(outer === &#39;10020&#39;); // true</span>
</span></code></pre></td></tr></table></div></figure>


<p>In cases such as the preceding one, you should convert to the appropriate type early on:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">formData</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Functions for Converting to Boolean, Number, String, and Object</h5>

<p>The following functions are the preferred way of converting a value to a boolean, num‐ ber, string, or object:</p>

<ul>
<li>Boolean()
Converts a value to a boolean. The following values are converted to false; they are the so-called “falsy” values:</li>
</ul>


<p>undefined,null,false ,0,NaN, &lsquo;&rsquo;</p>

<p>*　Number()</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">•</span> <span class="kc">undefined</span> <span class="nx">becomes</span> <span class="kc">NaN</span><span class="p">.</span>
</span><span class='line'><span class="err">•</span> <span class="kc">null</span> <span class="nx">becomes</span> <span class="mi">0</span><span class="p">.</span>
</span><span class='line'><span class="err">•</span> <span class="kc">false</span> <span class="nx">becomes</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">true</span> <span class="nx">becomes</span> <span class="mi">1</span><span class="p">.</span>
</span><span class='line'><span class="err">•</span> <span class="nx">Strings</span> <span class="nx">are</span> <span class="nx">parsed</span><span class="p">.</span>
</span><span class='line'><span class="err">•</span> <span class="nx">Objects</span> <span class="nx">are</span> <span class="nx">first</span> <span class="nx">converted</span> <span class="nx">to</span> <span class="nx">primitives</span> <span class="p">(</span><span class="nx">discussed</span> <span class="nx">shortly</span><span class="p">),</span> <span class="nx">which</span> <span class="nx">are</span> <span class="nx">then</span> <span class="nx">converted</span> <span class="nx">to</span> <span class="nx">numbers</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>String()
Converts a value to a string. It has the obvious results for all primitives. For example:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nb">String</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;null&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">String</span><span class="p">(</span><span class="mf">123.45</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;123.45&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">String</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;false&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Objects are first converted to primitives (discussed shortly), which are then con‐ verted to strings.</p>

<p>*　Object()
Converts objects to themselves, undefined and null to empty objects, and primi‐ tives to wrapped primitives. For example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="mi">123</span> <span class="p">};</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Object</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="nx">obj</span> <span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Object</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span>
</span><span class='line'><span class="p">{}</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Object</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span> <span class="k">instanceof</span> <span class="nb">String</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Algorithm: ToPrimitive()—Converting a Value to a Primitive</h4>

<p>To convert a value to either a number or a string, it is first converted to an arbitrary primitive value, which is then converted to the final type</p>

<p>The ECMAScript specification has an internal function, ToPrimitive() (which is not accessible from JavaScript), that performs this conversion. Understanding ToPrimi tive() enables you to configure how objects are converted to numbers and strings. It has the following signature:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">ToPrimitive</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">PreferredType</span><span class="o">?</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The optional parameter PreferredType indicates the final type of the conversion: it is either Number or String, depending on whether the result of ToPrimitive() will be converted to a number or a string.</p>

<p>If PreferredType is Number, then you perform the following steps:</p>

<ol>
<li>If input is primitive, return it (there is nothing more to do).</li>
<li>Otherwise, input is an object. Call input.valueOf(). If the result is primitive, return it.</li>
<li>Otherwise, call input.toString(). If the result is primitive, return it.</li>
<li>Otherwise, throw a TypeError (indicating the failure to convert input to aprimitive).
If PreferredType is String, steps 2 and 3 are swapped. The PreferredType can also be omitted; it is then considered to be String for dates and Number for all other values. This is how the operators + and == call ToPrimitive().

<h5>Examples: ToPrimitive() in action</h5>

The default implementation of valueOf() returns this, while the default implementa‐ tion of toString() returns type information:
&#8220;`

<blockquote><p>var empty = {};> empty.valueOf() === empty
true> empty.toString()&lsquo;[object Object]&rsquo;<code>
Therefore, Number() skips valueOf() and converts the result of toString() to a num‐ ber; that is, it converts '[object Object]' to NaN:
</code>
Number({})NaN<code>
The following object customizes valueOf(), which influences Number(), but doesn’t change anything for String():</code>
var n = { valueOf: function () { return 123 } }; > Number(n)123> String(n)&lsquo;[object Object]&rsquo;<code>
The following object customizes toString(). Because the result can be converted to a number, Number() can return a number:
</code>
var s = { toString: function () { return &lsquo;7&rsquo;; } };
String(s)&lsquo;7&rsquo;> Number(s)7&#8220;`</p>

<h3>Operators#### Operators and Objects</h3>

<p>One example where that is unfortunate is the plus operator, which many languages use for array concatenation. That’s not so with JavaScript, however, where this operator converts arrays to strings and appends them:</p></blockquote></li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="s1">&#39;1,23&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">String</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="s1">&#39;1,2&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">String</span><span class="p">([</span><span class="mi">3</span><span class="p">])</span>
</span><span class='line'><span class="s1">&#39;3&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Equality Operators: === Versus ==</h4>

<p>JavaScript has two ways of determining whether two values are equal:</p>

<ul>
<li>Strict equality (===) and strict inequality (!==) consider only values that have the same type to be equal.</li>
<li>Normal (or “lenient”) equality (==) and inequality (!=) try to convert values of different types before comparing them as with strict (in)equality.</li>
</ul>


<h4>Strict Equality (===, !==)</h4>

<p>Values with different types are never strictly equal. If both values have the same type, then the following assertions hold:<em> undefined === undefined</em> null === null* Two numbers:
<code>
x === x // unless x is NaN+0 === -0NaN !== NaN // read explanation that follows</code>
* Two booleans, two strings: obvious results
* Two objects (including arrays and functions): x === y if and only if x and y are the <code>same</code> object; that is, if you want to compare different objects, you have to implement your own comparison algorithm:
&#8220;`</p>

<blockquote><p>var b = {}, c = {};
b === cfalse> b === btrue&#8220;`
* Everything else: not strictly equal.</p>

<h4>Pitfall: NaN</h4>

<p>The special number value NaN (see “NaN” on page 106) is not equal to itself:
<code>
NaN === NaNfalse</code>
Thus, you need to use other means to check for it, which are described in “Pitfall: checking whether a value is NaN” on page 107.</p>

<h4>Strict inequality (!==)</h4>

<h4>Normal (Lenient) Equality (==, !=)</h4>

<p>The algorithm for comparing via normal equality works as follows. If both operands have the same type (one of the six specification types—Undefined, Null, Boolean, Num‐ ber, String, and Object), then compare them via strict equality.</p></blockquote>

<p>Otherwise, if the operands are:</p>

<ol>
<li><p>undefined and null, then they are considered leniently equal:</p>

<p> &#8220;`</p>

<blockquote><p>undefined == null    true
 &#8220;`</p></blockquote></li>
<li><p>A string and a number, then convert the string to a number and compare both operands via strict equality.</p></li>
<li>A boolean and a nonboolean, then convert the boolean to a number and compare leniently (again).</li>
<li>An object and a number or a string, then try to convert the object to a primitive (via the algorithm described in “Algorithm: ToPrimitive()—Converting a Value to a Primitive” on page 79) and compare leniently (again).

<h4>Pitfall: lenient equality is different from conversion to boolean</h4>

&#8220;`

<blockquote><p>2 == truefalse> 2 == falsefalse> 1 == truetrue> 0 == falsetrue// 2 === 1// 2 === 0// 1 === 1// 0 === 0&#8220;`
Similarly, while the empty string is equal to false, not all nonempty strings are equal to true:</p></blockquote></li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;&#39;</span> <span class="o">==</span> <span class="kc">false</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;1&#39;</span> <span class="o">==</span> <span class="kc">true</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;2&#39;</span> <span class="o">==</span> <span class="kc">true</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="c1">// 0 === 0</span>
</span><span class='line'><span class="c1">// 1 === 1</span>
</span><span class='line'><span class="c1">// 2 === 1</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;abc&#39;</span> <span class="o">==</span> <span class="kc">true</span>  <span class="c1">// NaN === 1</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Pitfall: lenient equality and strings</h4>

<p>Some of the leniency can be useful, depending on what you want:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="s1">&#39;abc&#39;</span> <span class="o">==</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>  <span class="c1">// &#39;abc&#39; == &#39;abc&#39;</span>
</span><span class='line'><span class="kc">true</span>
</span><span class='line'><span class="o">&gt;</span> <span class="s1">&#39;123&#39;</span> <span class="o">==</span> <span class="mi">123</span>  <span class="c1">// 123 === 123</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Other cases are problematic, due to how JavaScript converts strings to numbers (see “Converting to Number” on page 104):
&#8220;`</p>

<blockquote><p>&lsquo;\n\t123\r &rsquo; == 123  // usually not OKtrue> &lsquo;&rsquo; == 0  // 0 === 0true&#8220;`</p>

<h4>Pitfall: lenient equality and objects</h4>

<p>If you compare an object to a nonobject, it is converted to a primitive, which leads to strange results:
<code>
{} == '[object Object]'true&gt; ['123'] == 123true&gt; [] == 0true</code>
However, two objects are only equal if they are they same object. That means that you can’t really compare two wrapper objects:</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">===</span> <span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">new</span> <span class="nb">Number</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="o">===</span> <span class="k">new</span> <span class="nb">Number</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<h4>There Are No Valid Use Cases for ==</h4>

<ul>
<li>Use case: checking for undefined or null
The following comparison ensures that x is neither undefined nor null:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>replace the above with</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you want to be more precise, you should perform an explicit check for both values:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Use case: working with numbers in strings
If you are not sure whether a value x is a number or a number-as-a-string, you can use checks such as the following:
<code>
if (x == 123) ...</code>
The preceding checks whether x is either 123 or &lsquo;123&rsquo;. Again, this is very compact, andagain, it is better to be explicit:
<code>
if (Number(x) === 123) ...</code>

<h4>Use case: comparing wrapper instances with primitives</h4>

Lenient equals lets you compare primitives with wrapped primitives:
&#8220;`

<blockquote><p>&lsquo;abc&rsquo; == new String(&lsquo;abc&rsquo;)true&#8220;`
There are three reasons against this approach. First, lenient equality does not work between wrapped primitives:</p></blockquote></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>Second, you should avoid wrappers anyway. Third, if you do use them, it is better to be explicit:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">wrapped</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;abc&#39;</span><span class="p">)</span> <span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<h4>What is void used for?</h4>

<p>Under ECMAScript 5, void is rarely useful. Its main use cases are:</p>

<ul>
<li>void 0 as a synonym for undefined</li>
</ul>


<p>The latter can be changed, while the former will always have the correct value. However, undefined is reasonably safe from being changed under ECMAScript 5, which makes this use case less important</p>

<ul>
<li>Discarding the result of an expression
In some situations, it is important to return undefined as opposed to the result of an expression. Then void can be used to discard that result. One such situation involves javascript: URLs, which should be avoided for links, but are useful for bookmarklets. When you visit one of those URLs, many browsers replace the cur‐ rent document with the result of evaluating the URL’s “content,” but only if the result isn’t undefined. Hence, if you want to open a new window without changing the currently displayed content, you can do the following:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">javascript</span><span class="o">:</span><span class="k">void</span> <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;http://example.com/&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Prefixing an IIFE
An IIFE must be parsed as an expression. One of several ways to ensure that is by prefixing it with void (see “IIFE Variation: Prefix Operators” on page 184).2</li>
</ul>


<h4>Categorizing Values via typeof and instanceof</h4>

<p>If you want to categorize a value, you unfortunately have to distinguish between prim‐ itives and objects (refer back to Chapter 8) in JavaScript:</p>

<ul>
<li>The typeof operator distinguishes primitives from objects and determines the types of primitives.</li>
<li>The instanceof operator determines whether an object is an instance of a given constructor.</li>
</ul>


<h5>typeof: Categorizing Primitives</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="k">typeof</span> <span class="kc">undefined</span>
</span><span class='line'><span class="s1">&#39;undefined&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">typeof</span> <span class="s1">&#39;abc&#39;</span>
</span><span class='line'><span class="s1">&#39;string&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">typeof</span> <span class="p">{}</span>
</span><span class='line'><span class="s1">&#39;object&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="k">typeof</span> <span class="p">[]</span>
</span><span class='line'><span class="s1">&#39;object&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Pitfall: typeof null</h5>

<p>Unfortunately,typeof nullis&#8217;object&#8217;.Thisisconsideredabug(nullisnotamember of the internal type Object), but it can’t be fixed, because doing so would break existing code. You thus have to be wary of null</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">isObject</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span>
</span><span class='line'>  <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span>
</span><span class='line'>  <span class="o">||</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">));</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">isObject</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">isObject</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
</span><span class='line'><span class="kc">false</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">isObject</span><span class="p">({})</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Checking whether a variable exists</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>It determines whether x is undefined.2. It determines whether the variable x exists.

<h4>Manually Converting to Boolean</h4>

<p>Manually Converting to Boolean</p></li>
<li>Boolean(value) (Invoked as a function, not as a constructor)value ? true : false* !!value * A single “not” converts to negated boolean; use twice for the nonnegated conversion.
I prefer Boolean(), because it is more descriptive.

<h5>Pattern: providing a default value</h5>

<p>Sometimes there are situations where a value (a parameter, the result of a function, etc.) can be either a nonvalue (undefined, null) or an actual value. If you want to provide a default value for the former case, you can use the Or operator:</p></li>
</ol>


<figure class='code'><figcaption><span>theValue || defaultValue</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">```</span>
</span><span class='line'>
</span><span class='line'><span class="nx">The</span> <span class="nx">preceding</span> <span class="nx">expression</span> <span class="nx">evaluates</span> <span class="nx">to</span> <span class="nx">theValue</span> <span class="k">if</span> <span class="nx">it</span> <span class="nx">is</span> <span class="nx">truthy</span> <span class="nx">and</span> <span class="nx">to</span> <span class="nx">defaultValue</span>
</span><span class='line'><span class="nx">otherwise</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">usual</span> <span class="nx">caveat</span> <span class="nx">applies</span><span class="o">:</span> <span class="nx">defaultValue</span> <span class="nx">will</span> <span class="nx">also</span> <span class="nx">be</span> <span class="nx">returned</span> <span class="k">if</span> <span class="nx">theValue</span> <span class="nx">has</span> <span class="nx">a</span> <span class="nx">falsy</span> <span class="nx">value</span> <span class="nx">other</span> <span class="nx">than</span> <span class="kc">undefined</span> <span class="nx">and</span> <span class="kc">null</span><span class="p">.</span> <span class="nx">Let</span><span class="err">’</span><span class="nx">s</span> <span class="nx">look</span> <span class="nx">at</span> <span class="nx">three</span> <span class="nx">examples</span> <span class="nx">of</span> <span class="nx">using</span> <span class="nx">that</span> <span class="nx">pattern</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="o">*</span> <span class="nx">Example</span> <span class="mi">1</span><span class="o">:</span> <span class="nx">a</span> <span class="k">default</span> <span class="k">for</span> <span class="nx">a</span> <span class="nx">parameter</span>
</span><span class='line'><span class="nx">The</span> <span class="nx">parameter</span> <span class="nx">text</span> <span class="nx">of</span> <span class="nx">the</span> <span class="kd">function</span> <span class="nx">saveText</span><span class="p">()</span> <span class="nx">is</span> <span class="nx">optional</span> <span class="nx">and</span> <span class="nx">should</span> <span class="nx">be</span> <span class="nx">the</span> <span class="nx">empty</span> <span class="nx">string</span> <span class="k">if</span> <span class="nx">it</span> <span class="nx">has</span> <span class="nx">been</span> <span class="nx">omitted</span><span class="o">:</span>
</span><span class='line'>
</span><span class='line'><span class="err">```</span><span class="nx">javascript</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">saveText</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="err">```</span>
</span><span class='line'>
</span><span class='line'><span class="nx">This</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">most</span> <span class="nx">common</span> <span class="nx">use</span> <span class="nx">of</span> <span class="o">||</span> <span class="nx">as</span> <span class="nx">a</span> <span class="k">default</span> <span class="nx">operator</span><span class="p">.</span> <span class="nx">Consult</span> <span class="err">“</span><span class="nx">Optional</span> <span class="nx">Parame</span><span class="err">‐</span> <span class="nx">ters</span><span class="err">”</span> <span class="nx">on</span> <span class="nx">page</span> <span class="mi">173</span> <span class="k">for</span> <span class="nx">more</span> <span class="nx">on</span> <span class="nx">optional</span> <span class="nx">parameters</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="o">*</span> <span class="nx">Example</span> <span class="mi">2</span><span class="o">:</span> <span class="nx">a</span> <span class="k">default</span> <span class="k">for</span> <span class="nx">a</span> <span class="nx">property</span>
</span><span class='line'>
</span><span class='line'><span class="nx">The</span> <span class="nx">object</span> <span class="nx">options</span> <span class="nx">may</span> <span class="nx">or</span> <span class="nx">may</span> <span class="nx">not</span> <span class="nx">have</span> <span class="nx">the</span> <span class="nx">property</span> <span class="nx">title</span><span class="p">.</span> <span class="nx">If</span> <span class="nx">it</span> <span class="nx">is</span> <span class="nx">missing</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">value</span> <span class="s1">&#39;Untitled&#39;</span> <span class="nx">should</span> <span class="nx">be</span> <span class="nx">used</span> <span class="nx">when</span> <span class="nx">setting</span> <span class="nx">the</span> <span class="nx">title</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript    setTitle(options.title || &lsquo;Untitled&rsquo;);&#8220;`
* Example 3: a default for the result of a function</p>

<p>The function countOccurrences counts how often regex matches inside str:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">countOccurrences</span><span class="p">(</span><span class="nx">regex</span><span class="p">,</span> <span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Omitted: check that /g is set for `regex` </span>
</span><span class='line'>  <span class="k">return</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">regex</span><span class="p">)</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Numbers</h4>

<p>JavaScript has a single type for all numbers: it treats all of them as floating-point num‐ bers. However, the dot is not displayed if there are no digits after the decimal point:</p>

<figure class='code'><figcaption><span>> 5.0005</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nb">Number</span><span class="p">(</span><span class="s1">&#39;\t\v\r12.34\n &#39;</span><span class="p">)</span>  <span class="c1">// ignores leading and trailing whitespace</span>
</span><span class='line'><span class="mf">12.34</span>
</span><span class='line'><span class="err">```</span>
</span><span class='line'>
</span><span class='line'><span class="err">#####</span> <span class="nb">parseFloat</span><span class="p">()</span>
</span><span class='line'><span class="o">*</span>  <span class="nx">Applying</span> <span class="nb">parseFloat</span><span class="p">()</span> <span class="nx">to</span> <span class="nx">a</span> <span class="nx">nonstring</span> <span class="nx">is</span> <span class="nx">less</span> <span class="nx">efficient</span><span class="p">,</span> <span class="nx">because</span> <span class="nx">it</span> <span class="nx">coerces</span> <span class="nx">its</span> <span class="nx">argu</span><span class="err">‐</span> <span class="nx">ment</span> <span class="nx">to</span> <span class="nx">a</span> <span class="nx">string</span> <span class="nx">before</span> <span class="nx">parsing</span> <span class="nx">it</span><span class="p">.</span> <span class="nx">As</span> <span class="nx">a</span> <span class="nx">consequence</span><span class="p">,</span> <span class="nx">many</span> <span class="nx">values</span> <span class="nx">that</span> <span class="nb">Number</span><span class="p">()</span> <span class="nx">converts</span> <span class="nx">to</span> <span class="nx">actual</span> <span class="nx">numbers</span> <span class="nx">are</span> <span class="nx">converted</span> <span class="nx">to</span> <span class="kc">NaN</span> <span class="nx">by</span> <span class="nb">parseFloat</span><span class="p">()</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>parseFloat(true)  // same as parseFloat(&lsquo;true&rsquo;)NaN> Number(true)1> parseFloat(null)  // same as parseFloat(&lsquo;null&rsquo;)NaN> Number(null)0</p></blockquote>

<figure class='code'><figcaption><span>> 5.0005</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">*</span> <span class="nb">parseFloat</span><span class="p">()</span> <span class="nx">parses</span> <span class="nx">the</span> <span class="nx">empty</span> <span class="nx">string</span> <span class="nx">as</span> <span class="kc">NaN</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>parseFloat(&lsquo;&rsquo;)NaN</p></blockquote>

<figure class='code'><figcaption><span>> 5.0005</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">*</span>  <span class="nb">parseFloat</span><span class="p">()</span><span class="nx">ignoresleadingwhitespaceandstopsbeforeillegalcharacters</span><span class="p">(</span><span class="nx">which</span> <span class="nx">include</span> <span class="nx">whitespace</span><span class="p">)</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>parseFloat(&lsquo;\t\v\r12.34\n &rsquo;)12.34</p></blockquote>

<figure class='code'><figcaption><span>> 5.0005</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">####</span> <span class="nx">Special</span> <span class="nb">Number</span> <span class="nx">Values</span>
</span><span class='line'><span class="nx">JavaScript</span> <span class="nx">has</span> <span class="nx">several</span> <span class="nx">special</span> <span class="nx">number</span> <span class="nx">values</span><span class="o">:</span>
</span><span class='line'>
</span><span class='line'><span class="o">*</span> <span class="nx">Two</span> <span class="nx">error</span> <span class="nx">values</span><span class="p">,</span> <span class="kc">NaN</span> <span class="nx">and</span> <span class="kc">Infinity</span><span class="p">.</span>
</span><span class='line'><span class="o">*</span> <span class="nx">Two</span> <span class="nx">values</span> <span class="k">for</span> <span class="nx">zero</span><span class="p">,</span> <span class="o">+</span><span class="mi">0</span> <span class="nx">and</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span> <span class="nx">JavaScript</span> <span class="nx">has</span> <span class="nx">two</span> <span class="nx">zeros</span><span class="p">,</span> <span class="nx">a</span> <span class="nx">positive</span> <span class="nx">zero</span> <span class="nx">and</span> <span class="nx">a</span> <span class="nx">negative</span> <span class="nx">zero</span><span class="p">,</span> <span class="nx">because</span> <span class="nx">the</span> <span class="nx">sign</span> <span class="nx">and</span> <span class="nx">the</span> <span class="nx">magnitude</span> <span class="nx">of</span> <span class="nx">a</span> <span class="nx">number</span> <span class="nx">are</span> <span class="nx">stored</span> <span class="nx">separately</span><span class="p">.</span> <span class="nx">In</span> <span class="nx">most</span> <span class="nx">of</span> <span class="k">this</span> <span class="nx">book</span><span class="p">,</span> <span class="nx">I</span> <span class="nx">pretend</span> <span class="nx">that</span> <span class="nx">there</span> <span class="nx">is</span> <span class="nx">only</span> <span class="nx">a</span> <span class="nx">single</span> <span class="nx">zero</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">you</span> <span class="nx">almost</span> <span class="nx">never</span> <span class="nx">see</span> <span class="k">in</span> <span class="nx">JavaScript</span> <span class="nx">that</span> <span class="nx">there</span> <span class="nx">are</span> <span class="nx">two</span> <span class="nx">of</span> <span class="nx">them</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="err">####</span> <span class="nx">Pitfall</span><span class="o">:</span> <span class="nx">checking</span> <span class="nx">whether</span> <span class="nx">a</span> <span class="nx">value</span> <span class="nx">is</span> <span class="kc">NaN</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>isNaN(NaN)true> isNaN(33)false&#8220;`
However, isNaN does not work properly with nonnumbers, because it first converts those to numbers. That conversion can produce NaN and then the function incorrectly returns true:</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nb">isNaN</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">)</span>
</span><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Thus, it is best to combine isNaN with a type check:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">myIsNaN</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Alternatively, you can check whether the value is unequal to itself (as NaN is the only value with this trait). But that is less self-explanatory:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">myIsNaN</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">value</span> <span class="o">!==</span> <span class="nx">value</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Infinity</h4>

<p>Infinity is an error value indicating one of two problems: a number can’t be represented because its magnitude is too large, or a division by zero has happened.</p>

<p>The exponent must be between (and excluding) −1023 and 1024. If the exponent is too small, the number becomes 0. If the exponent is too large, it becomes Infinity. 21023 can still be represented, but pow(2, 1024) can’t:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1023</span><span class="p">)</span>
</span><span class='line'><span class="mf">8.98846567431158</span><span class="nx">e</span><span class="o">+</span><span class="mi">307</span>
</span><span class='line'><span class="o">&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
</span><span class='line'><span class="kc">Infinity</span>
</span></code></pre></td></tr></table></div></figure>


<p>Error: division by zero</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span><span class="mi">3</span><span class="o">/</span> <span class="mi">0</span>
</span><span class='line'><span class="kc">Infinity</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">3</span> <span class="o">/</span> <span class="o">-</span><span class="mi">0</span>
</span><span class='line'><span class="o">-</span><span class="kc">Infinity</span>
</span><span class='line'><span class="err">```</span>
</span><span class='line'><span class="err">#####</span> <span class="nx">Computing</span> <span class="kd">with</span> <span class="kc">Infinity</span>
</span><span class='line'><span class="nx">You</span> <span class="nx">get</span> <span class="nx">the</span> <span class="nx">error</span> <span class="nx">result</span> <span class="kc">NaN</span> <span class="k">if</span> <span class="nx">you</span> <span class="k">try</span> <span class="nx">to</span> <span class="err">“</span><span class="nx">neutralize</span><span class="err">”</span> <span class="nx">one</span> <span class="kc">Infinity</span> <span class="kd">with</span> <span class="nx">another</span> <span class="nx">one</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>Infinity &ndash; InfinityNaN> Infinity / InfinityNaN</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">#####</span> <span class="nx">Checking</span> <span class="k">for</span> <span class="kc">Infinity</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>var x = Infinity;
x === Infinity true</p>

<p>isFinite(5)true> isFinite(Infinity)> isFinite(NaN)false</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">compare</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
var EPSILON = Math.pow(2, -53);
function epsEqu(x, y) { return Math.abs(x &ndash; y) &lt; EPSILON; }</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">####</span> <span class="nx">Ranges</span> <span class="nx">of</span> <span class="nx">Integers</span>
</span><span class='line'><span class="o">*</span> <span class="nx">Safeintegers</span><span class="p">,</span> <span class="nx">thelargestpracticallyusablerangeof</span> <span class="nx">integers</span> <span class="nx">that</span> <span class="nx">JavaScript</span> <span class="nx">supports</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
— 53 bits plus a sign, range (−253, 253)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">*</span> <span class="nb">Array</span> <span class="nx">indices</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
— 32 bits, unsigned— Maximum length: 232−1— Range of indices: [0, 232−1) (excluding the maximum length!)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">*</span> <span class="nx">Bitwise</span> <span class="nx">operands</span>
</span><span class='line'>
</span><span class='line'><span class="err">—</span> <span class="nx">Unsigned</span> <span class="nx">right</span> <span class="nx">shift</span> <span class="nx">operator</span> <span class="p">(</span><span class="o">&gt;&gt;&gt;</span><span class="p">)</span><span class="o">:</span> <span class="mi">32</span> <span class="nx">bits</span><span class="p">,</span> <span class="nx">unsigned</span><span class="p">,</span> <span class="nx">range</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">232</span><span class="p">)</span>
</span><span class='line'><span class="err">—</span> <span class="nx">All</span> <span class="nx">other</span> <span class="nx">bitwise</span> <span class="nx">operators</span><span class="o">:</span> <span class="mi">32</span> <span class="nx">bits</span><span class="p">,</span> <span class="nx">including</span> <span class="nx">a</span> <span class="nx">sign</span><span class="p">,</span> <span class="nx">range</span> <span class="p">[</span><span class="err">−</span><span class="mi">231</span><span class="p">,</span> <span class="mi">231</span><span class="p">)</span>
</span><span class='line'><span class="err">####</span> <span class="nx">Definitions</span> <span class="k">in</span> <span class="nx">ECMAScript</span> <span class="mi">6</span>
</span><span class='line'><span class="nx">ECMAScript</span> <span class="mi">6</span> <span class="nx">will</span> <span class="nx">provide</span> <span class="nx">the</span> <span class="nx">following</span> <span class="nx">constants</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
Number.MAX_SAFE_INTEGER = Math.pow(2, 53)-1;Number.MIN_SAFE_INTEGER = -Number.MAX_SAFE_INTEGER;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">It</span> <span class="nx">will</span> <span class="nx">also</span> <span class="nx">provide</span> <span class="nx">a</span> <span class="kd">function</span> <span class="k">for</span> <span class="nx">determining</span> <span class="nx">whether</span> <span class="nx">an</span> <span class="nx">integer</span> <span class="nx">is</span> <span class="nx">safe</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
Number.isSafeInteger = function (n) {</p>

<pre><code>    return (typeof n === 'number' &amp;&amp;            Math.round(n) === n &amp;&amp;            Number.MIN_SAFE_INTEGER &lt;= n &amp;&amp;            n &lt;= Number.MAX_SAFE_INTEGER);}
</code></pre>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">####</span> <span class="nx">Converting</span> <span class="nx">to</span> <span class="nx">Integer</span>
</span><span class='line'><span class="nx">In</span> <span class="nx">JavaScript</span><span class="p">,</span> <span class="nx">all</span> <span class="nx">numbers</span> <span class="nx">are</span> <span class="nx">floating</span> <span class="nx">point</span><span class="p">.</span> <span class="nx">Integers</span> <span class="nx">are</span> <span class="nx">floating</span><span class="o">-</span><span class="nx">point</span> <span class="nx">numbers</span> <span class="nx">without</span> <span class="nx">a</span> <span class="nx">fraction</span><span class="p">.</span> <span class="nx">Converting</span> <span class="nx">a</span> <span class="nx">number</span> <span class="nx">n</span> <span class="nx">to</span> <span class="nx">an</span> <span class="nx">integer</span> <span class="nx">means</span> <span class="nx">finding</span> <span class="nx">the</span> <span class="nx">integer</span> <span class="nx">that</span> <span class="nx">is</span> <span class="err">“`</span><span class="nx">closest</span><span class="err">`”</span> <span class="nx">to</span> <span class="nx">n</span>
</span><span class='line'>
</span><span class='line'><span class="nx">use</span> <span class="nx">TheMathfunctionsMath</span><span class="p">.</span><span class="nx">floor</span><span class="p">(),</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(),</span><span class="nx">andMath</span><span class="p">.</span><span class="nx">round</span><span class="p">()</span>
</span><span class='line'><span class="err">####</span> <span class="mi">32</span><span class="o">-</span><span class="nx">bit</span> <span class="nx">Integers</span> <span class="nx">via</span> <span class="nx">Bitwise</span> <span class="nx">Operators</span>
</span><span class='line'><span class="nx">Binary</span> <span class="nx">bitwise</span> <span class="nx">operators</span> <span class="p">(</span><span class="nx">see</span> <span class="err">“</span><span class="nx">Binary</span> <span class="nx">Bitwise</span> <span class="nx">Operators</span><span class="err">”</span> <span class="nx">on</span> <span class="nx">page</span> <span class="mi">126</span><span class="p">)</span> <span class="nx">convert</span> <span class="p">(</span><span class="nx">at</span> <span class="nx">least</span><span class="p">)</span> <span class="nx">one</span> <span class="nx">of</span> <span class="nx">their</span> <span class="nx">operands</span> <span class="nx">to</span> <span class="nx">a</span> <span class="mi">32</span><span class="o">-</span><span class="nx">bit</span> <span class="nx">integer</span> <span class="nx">that</span> <span class="nx">is</span> <span class="nx">then</span> <span class="nx">manipulated</span> <span class="nx">to</span> <span class="nx">produce</span> <span class="nx">a</span> <span class="nx">result</span> <span class="nx">that</span> <span class="nx">is</span> <span class="nx">also</span> <span class="nx">a</span> <span class="mi">32</span><span class="o">-</span><span class="nx">bit</span> <span class="nx">integer</span><span class="p">.</span> <span class="nx">Therefore</span><span class="p">,</span> <span class="k">if</span> <span class="nx">you</span> <span class="nx">choose</span> <span class="nx">the</span> <span class="nx">other</span> <span class="nx">operand</span> <span class="nx">appropriately</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">get</span> <span class="nx">a</span> <span class="nx">fast</span> <span class="nx">way</span> <span class="nx">to</span> <span class="nx">convert</span> <span class="nx">an</span> <span class="nx">arbitrary</span> <span class="nx">number</span> <span class="nx">to</span> <span class="nx">a</span> <span class="mi">32</span><span class="o">-</span><span class="nx">bit</span> <span class="nx">integer</span> <span class="p">(</span><span class="nx">that</span> <span class="nx">is</span> <span class="nx">either</span> <span class="nx">signed</span> <span class="nx">or</span> <span class="nx">unsigned</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="err">#####</span> <span class="nx">Bitwise</span> <span class="nx">Or</span> <span class="p">(</span><span class="o">|</span><span class="p">)</span>
</span><span class='line'><span class="nx">If</span> <span class="nx">the</span> <span class="nx">mask</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">second</span> <span class="nx">operand</span><span class="p">,</span> <span class="nx">is</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">don</span><span class="err">’</span><span class="nx">t</span> <span class="nx">change</span> <span class="nx">any</span> <span class="nx">bits</span> <span class="nx">and</span> <span class="nx">the</span> <span class="nx">result</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">first</span> <span class="nx">operand</span><span class="p">,</span> <span class="nx">coerced</span> <span class="nx">to</span> <span class="nx">a</span> <span class="nx">signed</span> <span class="mi">32</span><span class="o">-</span><span class="nx">bit</span> <span class="nx">integer</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
 // Convert x to a signed 32-bit integerfunction ToInt32(x) {   return x | 0;}</p>

<blockquote><p>ToInt32(1.001)1> ToInt32(1.999)1> ToInt32(1)1
ToInt32(-1)-1> ToInt32(Math.pow(2, 32)+1)1> ToInt32(Math.pow(2, 32)-1)-1</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">#####</span> <span class="nx">Shift</span> <span class="nx">operators</span>
</span><span class='line'><span class="nx">The</span> <span class="nx">same</span> <span class="nx">trick</span> <span class="nx">that</span> <span class="nx">worked</span> <span class="k">for</span> <span class="nx">bitwise</span> <span class="nx">Or</span> <span class="nx">also</span> <span class="nx">works</span> <span class="k">for</span> <span class="nx">shift</span> <span class="nx">operators</span><span class="o">:</span> <span class="k">if</span> <span class="nx">you</span> <span class="nx">shift</span> <span class="nx">by</span> <span class="nx">zero</span> <span class="nx">bits</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">result</span> <span class="nx">of</span> <span class="nx">a</span> <span class="nx">shift</span> <span class="nx">operation</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">first</span> <span class="nx">operand</span><span class="p">,</span> <span class="nx">coerced</span> <span class="nx">to</span> <span class="nx">a</span> <span class="mi">32</span><span class="o">-</span><span class="nx">bit</span> <span class="nx">integer</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript
 // Convert x to a signed 32-bit integerfunction ToInt32(x) { return x &lt;&lt; 0;}// Convert x to a signed 32-bit integerfunction ToInt32(x) { return x >> 0;}// Convert x to an unsigned 32-bit integerfunction ToUint32(x) { return x >>> 0;}</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Here</span> <span class="nx">is</span> <span class="nx">ToUint32</span><span class="p">()</span> <span class="k">in</span> <span class="nx">action</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>ToUint32(-1)4294967295> ToUint32(Math.pow(2, 32)-1)4294967295> ToUint32(Math.pow(2, 32))0</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">#####</span> <span class="nx">The</span> <span class="nx">radix</span>
</span><span class='line'><span class="nb">parseInt</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">radix</span><span class="o">?</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>parseInt(&lsquo;0xA&rsquo;)10</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">If</span> <span class="nx">radix</span> <span class="nx">is</span> <span class="nx">already</span> <span class="mi">16</span><span class="p">,</span> <span class="nx">then</span> <span class="nx">the</span> <span class="nx">hexadecimal</span> <span class="nx">prefix</span> <span class="nx">is</span> <span class="nx">optional</span><span class="o">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>javascript</p>

<blockquote><p>parseInt(&lsquo;0xA&rsquo;, 16)10> parseInt(&lsquo;A&rsquo;, 16)10
parseInt(&lsquo;12.34&rsquo;, 10)12> parseInt(12.34, 10)12
parseInt(&lsquo;110&rsquo;, 2)6&#8220;`
Don’t use parseInt() to convert a number to an integer. Here is an example where the conversion is incorrect:</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nb">parseInt</span><span class="p">(</span><span class="mf">1000000000000000000000.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span class='line'><span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Explanation</code>
The argument is first converted to a string:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="nb">String</span><span class="p">(</span><span class="mf">1000000000000000000000.5</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1e+21&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>parseInt doesn’t consider “e” to be an integer digit and thus stops parsing after the 1.
parseInt() shouldn’t be used to convert numbers to integers: coercion to string is an unnecessary detour and even then, the result is not always correct.</p>

<ul>
<li>num.toString(2)(see“Number.prototype.toString(radix?)”onpage129)converts the number num to a string in binary notation. For example:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="mi">6</span><span class="p">..</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;110&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Bitwise Shift Operators</h5>

<p>JavaScript has three bitwise shift operators:</p>

<ul>
<li>number &lt;&lt; digitCount (left shift):</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;10&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>number >> digitCount (signed right shift):</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="s1">&#39;11111111111111111111111111111110&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;-1&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>number >>> digitCount</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="s1">&#39;11100&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1110&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Number Prototype Methods</h4>

<ul>
<li>Number.prototype.toFixed(fractionDigits?)</li>
</ul>


<p>Number.prototype.toFixed(fractionDigits?) returns an exponent-free representa‐ tion of the number, rounded to fractionDigits digits. If the parameter is omitted, the value 0 is used:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="mf">0.0000003</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;0.0000003000&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mf">0.0000003</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;3e-7&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the number is greater than or equal to 1021, then this method works the same as toString(). You get a number in exponential notation:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="mi">1234567890123456789012</span><span class="p">..</span><span class="nx">toFixed</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;1.2345678901234568e+21&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">1234567890123456789012</span><span class="p">..</span><span class="nx">toString</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;1.2345678901234568e+21&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Number.prototype.toPrecision(precision?)</li>
</ul>


<p>Number.prototype.toPrecision(precision?) prunes the mantissa to precision dig‐ its before using a conversion algorithm similar to toString(). If no precision is given, toString() is used directly:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="mi">1234</span><span class="p">..</span><span class="nx">toPrecision</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1.23e+3&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">1234</span><span class="p">..</span><span class="nx">toPrecision</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1234&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">1234</span><span class="p">..</span><span class="nx">toPrecision</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1234.0&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mf">1.234</span><span class="p">.</span><span class="nx">toPrecision</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1.23&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Number.prototype.toString(radix?)</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">..</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1111&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">65535</span><span class="p">..</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;ffff&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Number.prototype.toExponential(fractionDigits?)</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="o">&gt;</span> <span class="mi">1234567890123456789012</span><span class="p">..</span><span class="nx">toString</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;1.2345678901234568e+21&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">1234567890123456789012</span><span class="p">..</span><span class="nx">toExponential</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1.23456789012345677414e+21&#39;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">1234</span><span class="p">..</span><span class="nx">toString</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;1234&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">1234</span><span class="p">..</span><span class="nx">toExponential</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;1.23400e+3&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mi">1234</span><span class="p">..</span><span class="nx">toExponential</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;1.234e+3&#39;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'> <span class="o">&gt;</span> <span class="mf">0.003</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;0.003&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mf">0.003</span><span class="p">.</span><span class="nx">toExponential</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="s1">&#39;3.0000e-3&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="mf">0.003</span><span class="p">.</span><span class="nx">toExponential</span><span class="p">()</span>
</span><span class='line'><span class="s1">&#39;3e-3&#39;</span>
</span></code></pre></td></tr></table></div></figure>

</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>





  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"allentofight"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END --></div>
  </section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 - AllenToFight -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
	

<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->







		</div>
	</div>
</body>
</html>
